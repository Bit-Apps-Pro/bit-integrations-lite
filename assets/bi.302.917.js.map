{"version":3,"file":"bi.302.917.js","sources":["../frontend-dev/src/components/AllIntegrations/SystemeIO/IntegrationHelpers.jsx","../frontend-dev/src/components/AllIntegrations/SystemeIO/CustomField.jsx","../frontend-dev/src/components/AllIntegrations/SystemeIO/SystemeIOFieldMap.jsx","../frontend-dev/src/components/AllIntegrations/SystemeIO/SystemeIOIntegLayout.jsx"],"sourcesContent":["/* eslint-disable no-unused-expressions */\n\nexport const addFieldMap = (i, confTmp, setConf) => {\n  const newConf = { ...confTmp }\n  newConf.field_map.splice(i, 0, {})\n  setConf({ ...newConf })\n}\n\nexport const delFieldMap = (i, confTmp, setConf) => {\n  const newConf = { ...confTmp }\n  if (newConf.field_map.length > 1) {\n    newConf.field_map.splice(i, 1)\n  }\n\n  setConf({ ...newConf })\n}\n\nexport const handleFieldMapping = (event, index, conftTmp, setConf) => {\n  const newConf = { ...conftTmp }\n  newConf.field_map[index][event.target.name] = event.target.value\n\n  if (event.target.value === 'custom') {\n    newConf.field_map[index].customValue = ''\n  }\n  setConf({ ...newConf })\n}\n\nexport const handleCustomValue = (event, index, conftTmp, setConf) => {\n  const newConf = { ...conftTmp }\n\n  newConf.field_map[index].customValue = event.target.value\n  setConf({ ...newConf })\n}\n\nexport const handleCustomField = (event, index, conftTmp, setConf, fieldValue) => {\n  const newConf = { ...conftTmp }\n  newConf.field_map[index][fieldValue] = event.target.value\n  setConf({ ...newConf })\n}\n","import { __ } from '../../../Utils/i18nwrap'\nimport MtInput from '../../Utilities/MtInput'\nimport { handleCustomField } from './IntegrationHelpers'\n\nexport default function CustomField({ field, index, conf, setConf, fieldValue, fieldLabel, className }) {\n  return (\n    <MtInput\n      onChange={e => handleCustomField(e, index, conf, setConf, fieldValue)}\n      label={__(fieldLabel, 'bit-integrations')}\n      className={className}\n      type=\"text\"\n      value={field[fieldValue]}\n      placeholder={__(fieldLabel, 'bit-integrations')}\n    />\n  )\n}\n\n","/* eslint-disable no-console */\nimport { useRecoilValue } from 'recoil'\nimport { $btcbi } from '../../../GlobalStates'\nimport { SmartTagField } from '../../../Utils/StaticData/SmartTagField'\nimport { __ } from '../../../Utils/i18nwrap'\nimport CustomField from './CustomField'\nimport { addFieldMap, delFieldMap, handleFieldMapping } from './IntegrationHelpers'\n\nexport default function SystemeIOFieldMap({ i, formFields, field, systemeIOConf, setSystemeIOConf }) {\n  const requiredFields = systemeIOConf?.systemeIOFields && systemeIOConf.systemeIOFields.filter(fld => fld.required === true) || []\n  const allNonRequiredFields = systemeIOConf?.systemeIOFields && systemeIOConf.systemeIOFields.filter(fld => fld.required === false) || []\n\n  const btcbi = useRecoilValue($btcbi)\n  const { isPro } = btcbi\n\n  return (\n    <div\n      className=\"flx mt-2 mb-2 btcbi-field-map\"\n    >\n      <div className=\"pos-rel flx\">\n        <div className=\"flx integ-fld-wrp\">\n          <select className=\"btcd-paper-inp mr-2\" name=\"formField\" value={field.formField || ''} onChange={(ev) => handleFieldMapping(ev, i, systemeIOConf, setSystemeIOConf)}>\n            <option value=\"\">{__('Select Field', 'bit-integrations')}</option>\n            <optgroup label=\"Form Fields\">\n              {\n                formFields?.map(f => (\n                  <option key={`ff-rm-${f.name}`} value={f.name}>\n                    {f.label}\n                  </option>\n                ))\n              }\n            </optgroup>\n            <option value=\"custom\">{__('Custom...', 'bit-integrations')}</option>\n            <optgroup label={`General Smart Codes ${isPro ? '' : '(PRO)'}`}>\n              {isPro && SmartTagField?.map(f => (\n                <option key={`ff-rm-${f.name}`} value={f.name}>\n                  {f.label}\n                </option>\n              ))}\n            </optgroup>\n          </select>\n\n          {field.formField === 'custom' && (\n            <CustomField\n              field={field}\n              index={i}\n              conf={systemeIOConf}\n              setConf={setSystemeIOConf}\n              fieldValue=\"customValue\"\n              fieldLabel=\"Custom Value\"\n              className=\"mr-2\"\n            />\n          )}\n\n          <select className=\"btcd-paper-inp\" disabled={i < requiredFields.length} name=\"systemeIOFormField\" value={i < requiredFields.length ? (requiredFields[i].key || '') : (field.systemeIOFormField || '')} onChange={(ev) => handleFieldMapping(ev, i, systemeIOConf, setSystemeIOConf)}>\n            <option value=\"\">{__('Select Field', 'bit-integrations')}</option>\n            {\n              i < requiredFields.length ? (\n                <option key={requiredFields[i].key} value={requiredFields[i].key}>\n                  {requiredFields[i].label}\n                </option>\n              ) : (\n                allNonRequiredFields.map(({ key, label }) => (\n                  <option key={key} value={key}>\n                    {label}\n                  </option>\n                ))\n              )\n            }\n          </select>\n        </div>\n        {\n          i >= requiredFields.length && (\n            <>\n              <button\n                onClick={() => addFieldMap(i, systemeIOConf, setSystemeIOConf)}\n                className=\"icn-btn sh-sm ml-2 mr-1\"\n                type=\"button\"\n              >\n                +\n              </button>\n              <button onClick={() => delFieldMap(i, systemeIOConf, setSystemeIOConf)} className=\"icn-btn sh-sm ml-1\" type=\"button\" aria-label=\"btn\">\n                <span className=\"btcd-icn icn-trash-2\" />\n              </button>\n            </>\n          )\n        }\n      </div>\n    </div>\n  )\n}\n\n","/* eslint-disable no-unused-vars */\nimport MultiSelect from 'react-multiple-select-dropdown-lite'\nimport 'react-multiple-select-dropdown-lite/dist/index.css'\nimport { __ } from '../../../Utils/i18nwrap'\nimport Loader from '../../Loaders/Loader'\nimport { getAllTags } from './SystemeIOCommonFunc'\nimport SystemeIOFieldMap from './SystemeIOFieldMap'\nimport { addFieldMap } from './IntegrationHelpers'\n\nexport default function SystemeIOIntegLayout({ formFields, systemeIOConf, setSystemeIOConf, loading, setLoading, isLoading, setIsLoading, setSnackbar }) {\n  const setChanges = (val, name) => {\n\n    setSystemeIOConf(prevConf => {\n      const newConf = { ...prevConf }\n      newConf[name] = val\n\n      return newConf\n    })\n  }\n\n  return (\n    <>\n      {(isLoading || loading.tag || loading.session) && (\n        <Loader style={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: 100,\n          transform: 'scale(0.7)',\n        }}\n        />\n      )}\n\n      {systemeIOConf.actionName && !loading.tag\n        && (\n          <>\n            <br />\n            <br />\n            <div className=\"flx\">\n              <b className=\"wdt-200 d-in-b\">{__('Select Tag:', 'bit-integrations')}</b>\n              <MultiSelect\n                options={systemeIOConf?.tags && systemeIOConf.tags.map(tag => ({ label: tag.name, value: `${tag.id}` }))}\n                className=\"msl-wrp-options dropdown-custom-width\"\n                defaultValue={systemeIOConf?.selectedTag}\n                onChange={val => setChanges(val, 'selectedTag')}\n                singleSelect\n                closeOnSelect\n              />\n              <button\n                onClick={() => getAllTags(systemeIOConf, setSystemeIOConf, setLoading)}\n                className=\"icn-btn sh-sm ml-2 mr-2 tooltip\"\n                style={{ '--tooltip-txt': `'${__('Refresh Tags', 'bit-integrations')}'` }}\n                type=\"button\"\n                disabled={loading.tag}\n              >\n                &#x21BB;\n              </button>\n            </div>\n          </>\n        )}\n\n      {systemeIOConf.actionName && !isLoading && (\n        <div>\n          <br />\n          <div className=\"mt-5\">\n            <b className=\"wdt-100\">\n              {__('Field Map', 'bit-integrations')}\n            </b>\n            <button\n              className=\"icn-btn sh-sm ml-2 mr-2 tooltip\"\n              style={{ '--tooltip-txt': `'${__('Refresh Fields', 'bit-integrations')}'` }}\n              type=\"button\"\n            >\n              &#x21BB;\n            </button>\n          </div>\n\n          <br />\n          <div className=\"btcd-hr mt-1\" />\n          <div className=\"flx flx-around mt-2 mb-2 btcbi-field-map-label\">\n            <div className=\"txt-dp\"><b>{__('Form Fields', 'bit-integrations')}</b></div>\n            <div className=\"txt-dp\"><b>{__('SystemeIO Fields', 'bit-integrations')}</b></div>\n          </div>\n\n          {systemeIOConf?.field_map.map((itm, i) => (\n            <SystemeIOFieldMap\n              key={`rp-m-${i + 9}`}\n              i={i}\n              field={itm}\n              systemeIOConf={systemeIOConf}\n              formFields={formFields}\n              setSystemeIOConf={setSystemeIOConf}\n              setSnackbar={setSnackbar}\n            />\n          ))}\n          <div className=\"txt-center btcbi-field-map-button mt-2\"><button onClick={() => addFieldMap(systemeIOConf.field_map.length, systemeIOConf, setSystemeIOConf, false)} className=\"icn-btn sh-sm\" type=\"button\">+</button></div>\n          <br />\n          <br />\n        </div>\n\n      )}\n    </>\n  )\n}\n\n"],"names":["addFieldMap","i","confTmp","setConf","newConf","__spreadValues","delFieldMap","handleFieldMapping","event","index","conftTmp","handleCustomField","fieldValue","CustomField","field","conf","fieldLabel","className","jsx","MtInput","e","__","SystemeIOFieldMap","formFields","systemeIOConf","setSystemeIOConf","requiredFields","fld","allNonRequiredFields","btcbi","useRecoilValue","$btcbi","isPro","jsxs","ev","f","_a","SmartTagField","key","label","Fragment","SystemeIOIntegLayout","loading","setLoading","isLoading","setIsLoading","setSnackbar","setChanges","val","name","prevConf","Loader","MultiSelect","tag","getAllTags","itm"],"mappings":"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"}