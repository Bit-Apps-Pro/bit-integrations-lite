{"version":3,"file":"bi.969.716.js","sources":["../frontend-dev/src/components/AllIntegrations/GoogleSheet/GoogleSheetFieldMap.jsx","../frontend-dev/src/components/AllIntegrations/GoogleSheet/GoogleSheetIntegLayout.jsx"],"sourcesContent":["import { useRecoilValue } from 'recoil'\nimport { $btcbi } from '../../../GlobalStates'\nimport TrashIcn from '../../../Icons/TrashIcn'\nimport { __ } from '../../../Utils/i18nwrap'\nimport { SmartTagField } from '../../../Utils/StaticData/SmartTagField'\nimport MtInput from '../../Utilities/MtInput'\nimport { addFieldMap, delFieldMap, handleCustomValue, handleFieldMapping } from '../IntegrationHelpers/GoogleIntegrationHelpers'\nimport TagifyInput from '../../Utilities/TagifyInput'\n\nexport default function GoogleSheetFieldMap({ i, formFields, field, sheetConf, setSheetConf }) {\n  const btcbi = useRecoilValue($btcbi)\n  const { isPro } = btcbi\n  return (\n    <div\n      className=\"flx mt-2 mb-2 btcbi-field-map\"\n    >\n      <div className=\"flx integ-fld-wrp\">\n        <select className=\"btcd-paper-inp mr-2\" name=\"formField\" value={field.formField || ''} onChange={(ev) => handleFieldMapping(ev, i, sheetConf, setSheetConf)}>\n          <option value=\"\">{__('Select Field', 'bit-integrations')}</option>\n          <optgroup label=\"Form Fields\">\n            {\n              formFields.map(f => (<option key={`ff-zhcrm-${f.name}`} value={f.name}>{f.label}</option>)\n              )}\n          </optgroup>\n          <option value=\"custom\">{__('Custom...', 'bit-integrations')}</option>\n\n          <optgroup label={`General Smart Codes ${isPro ? '' : '(PRO)'}`}>\n            {isPro && SmartTagField?.map(f => (\n              <option key={`ff-rm-${f.name}`} value={f.name}>\n                {f.label}\n              </option>\n            ))}\n          </optgroup>\n        </select>\n\n        {field.formField === 'custom' && (\n          <TagifyInput onChange={e => handleCustomValue(e, i, sheetConf, setSheetConf)} label={__('Custom Value', 'bit-integrations')} className=\"mr-2\" type=\"text\" value={field.customValue || ''} placeholder={__('Custom Value', 'bit-integrations')} formFields={formFields} />\n        )}\n        <select className=\"btcd-paper-inp\" name=\"googleSheetField\" value={field.googleSheetField || ''} onChange={(ev) => handleFieldMapping(ev, i, sheetConf, setSheetConf)}>\n          <option value=\"\">{__('Select Field', 'bit-integrations')}</option>\n          {\n            sheetConf.default?.headers?.[sheetConf.spreadsheetId]?.[sheetConf.worksheetName]?.[sheetConf.headerRow] && Object.values(sheetConf.default.headers[sheetConf.spreadsheetId][sheetConf.worksheetName][sheetConf.headerRow]).map((header, indx) => (\n              <option key={`gsheet-${indx * 2}`} value={header}>\n                {header}\n              </option>\n            ))\n          }\n        </select>\n      </div>\n      <button\n        onClick={() => addFieldMap(i, sheetConf, setSheetConf)}\n        className=\"icn-btn sh-sm ml-2 mr-1\"\n        type=\"button\"\n      >\n        +\n      </button>\n      <button onClick={() => delFieldMap(i, sheetConf, setSheetConf)} className=\"icn-btn sh-sm ml-1\" type=\"button\" aria-label=\"btn\">\n        <TrashIcn />\n      </button>\n    </div>\n  )\n}\n","import { __ } from '../../../Utils/i18nwrap'\nimport Loader from '../../Loaders/Loader'\nimport { addFieldMap } from '../IntegrationHelpers/GoogleIntegrationHelpers'\nimport { refreshSpreadsheets, refreshWorksheetHeaders, refreshWorksheets } from './GoogleSheetCommonFunc'\nimport GoogleSheetFieldMap from './GoogleSheetFieldMap'\n\nexport default function GoogleSheetIntegLayout({ formID, formFields, handleInput, sheetConf, setSheetConf, isLoading, setIsLoading, setSnackbar }) {\n  return (\n    <>\n      <br />\n      <b className=\"wdt-200 d-in-b\">{__('Spreadsheets:', 'bit-integrations')}</b>\n      <select onChange={handleInput} name=\"spreadsheetId\" value={sheetConf.spreadsheetId} className=\"btcd-paper-inp w-5\">\n        <option value=\"\">{__('Select Spreadsheet', 'bit-integrations')}</option>\n        {\n          sheetConf?.default?.spreadsheets && Object.keys(sheetConf.default.spreadsheets).map(spreadSheetApiName => (\n            <option key={spreadSheetApiName} value={sheetConf.default.spreadsheets[spreadSheetApiName].spreadsheetId}>\n              {sheetConf.default.spreadsheets[spreadSheetApiName].spreadsheetName}\n            </option>\n          ))\n        }\n      </select>\n      <button onClick={() => refreshSpreadsheets(formID, sheetConf, setSheetConf, setIsLoading, setSnackbar)} className=\"icn-btn sh-sm ml-2 mr-2 tooltip\" style={{ '--tooltip-txt': '\"Refresh Spreadsheet\"' }} type=\"button\" disabled={isLoading}>&#x21BB;</button>\n      <br />\n      <br />\n      <b className=\"wdt-200 d-in-b\">Worksheet:</b>\n      <select onChange={handleInput} name=\"worksheetName\" value={sheetConf.worksheetName} className=\"btcd-paper-inp w-5\">\n        <option value=\"\">{__('Select Worksheet', 'bit-integrations')}</option>\n        {\n          sheetConf?.default?.worksheets?.[sheetConf.spreadsheetId] && sheetConf.default.worksheets[sheetConf.spreadsheetId].map(worksheet => (\n            <option key={worksheet.properties.sheetId} value={worksheet.properties.title}>\n              {worksheet.properties.title}\n            </option>\n          ))\n        }\n      </select>\n      <button onClick={() => refreshWorksheets(formID, sheetConf, setSheetConf, setIsLoading, setSnackbar)} className=\"icn-btn sh-sm ml-2 mr-2 tooltip\" style={{ '--tooltip-txt': '\"Refresh Sheet Worksheets\"' }} type=\"button\" disabled={isLoading}>&#x21BB;</button>\n      {/* <br />\n      <br />\n      <b className=\"wdt-150 d-in-b\">Header:</b>\n      <select onChange={handleInput} name=\"header\" value={sheetConf.header} className=\"btcd-paper-inp w-7\">\n        <option value={__('ROWS', 'bit-integrations')}>{__('Row', 'bit-integrations')}</option>\n        <option value={__('COLUMNS', 'bit-integrations')}>{__('Column', 'bit-integrations')}</option>\n      </select> */}\n      <br />\n      <br />\n      <b className=\"wdt-200 d-in-b\">{__('Header Row:', 'bit-integrations')}</b>\n      <input type=\"text\" min=\"1\" className=\"btcd-paper-inp w-5\" placeholder=\"Header Row\" onChange={handleInput} value={sheetConf.headerRow} name=\"headerRow\" />\n      <button onClick={() => refreshWorksheetHeaders(formID, sheetConf, setSheetConf, setIsLoading, setSnackbar)} className=\"icn-btn sh-sm ml-2 mr-2 tooltip\" style={{ '--tooltip-txt': '\"Refresh Worksheet Headers\"' }} type=\"button\" disabled={isLoading}>&#x21BB;</button>\n      <br />\n      <small className=\"mt-3 d-blk w-5\" style={{ marginLeft: 200, lineHeight: 1.8, textAlign: 'justify' }}>{__('By default, first row of the worksheet is considered as header row. This can be used if tabular data starts from any row other than the first row.', 'bit-integrations')}</small>\n\n      {isLoading && (\n        <Loader style={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: 100,\n          transform: 'scale(0.7)',\n        }}\n        />\n      )}\n      {sheetConf.default?.headers?.[sheetConf.spreadsheetId]?.[sheetConf.worksheetName]?.[sheetConf.headerRow]\n        && (\n          <>\n            <div className=\"mt-4\">\n              <b className=\"wdt-100\">{__('Map Fields', 'bit-integrations')}</b>\n            </div>\n            <div className=\"btcd-hr mt-1\" />\n            <div className=\"flx flx-around mt-2 mb-2 btcbi-field-map-label\">\n              <div className=\"txt-dp\"><b>{__('Form Fields', 'bit-integrations')}</b></div>\n              <div className=\"txt-dp\"><b>{__('Google Fields', 'bit-integrations')}</b></div>\n            </div>\n\n            {sheetConf.field_map.map((itm, i) => (\n              <GoogleSheetFieldMap\n                key={`sheet-m-${i + 9}`}\n                i={i}\n                field={itm}\n                sheetConf={sheetConf}\n                formFields={formFields}\n                setSheetConf={setSheetConf}\n              />\n            ))}\n            <div className=\"txt-center btcbi-field-map-button mt-2\"><button onClick={() => addFieldMap(sheetConf.field_map.length, sheetConf, setSheetConf)} className=\"icn-btn sh-sm\" type=\"button\">+</button></div>\n            <br />\n            <br />\n          </>\n        )}\n    </>\n  )\n}\n"],"names":["Recoil_index_18","jsxRuntimeExports","Loader","$btcbi","__","handleFieldMapping","handleCustomValue","addFieldMap","delFieldMap","refreshSpreadsheets","refreshWorksheets","refreshWorksheetHeaders","TrashIcn","SmartTagField","TagifyInput","GoogleSheetFieldMap","i","formFields","field","sheetConf","setSheetConf","_a","_b","_c","_d","_e","btcbi","useRecoilValue","isPro","jsxs","ev","jsx","f","e","header","indx","GoogleSheetIntegLayout","formID","handleInput","isLoading","setIsLoading","setSnackbar","_f","_g","Fragment","spreadSheetApiName","worksheet","itm"],"mappings":"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"}