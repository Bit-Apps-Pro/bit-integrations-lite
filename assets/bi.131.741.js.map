{"version":3,"file":"bi.131.741.js","sources":["../frontend-dev/src/components/AllIntegrations/Dropbox/DropboxCommonFunc.js"],"sourcesContent":["/* eslint-disable no-else-return */\nimport toast from 'react-hot-toast'\nimport { __ } from '../../../Utils/i18nwrap'\nimport bitsFetch from '../../../Utils/bitsFetch'\n\nexport const handleInput = (e, dropboxConf, setDropboxConf) => {\n  const newConf = { ...dropboxConf }\n  const { name } = e.target\n  if (e.target.value !== '') {\n    newConf[name] = e.target.value\n  } else {\n    delete newConf[name]\n  }\n  setDropboxConf({ ...newConf })\n}\n\nexport const getAllDropboxFolders = (flowID, dropboxConf, setDropboxConf) => {\n  const queryParams = {\n    flowID: flowID ?? null,\n    clientId: dropboxConf.clientId,\n    clientSecret: dropboxConf.clientSecret,\n    tokenDetails: dropboxConf.tokenDetails,\n  }\n  const loadPostTypes = bitsFetch(queryParams, 'dropbox_get_all_folders')\n    .then(result => {\n      if (result && result.success) {\n        const newConf = { ...dropboxConf }\n        if (result.data.dropboxFoldersList) {\n          newConf.foldersList = result.data.dropboxFoldersList\n          newConf.tokenDetails = result.data.tokenDetails\n        }\n\n        setDropboxConf(newConf)\n        return 'Dropbox Folders List refreshed successfully'\n      } else {\n        return 'Dropbox Folders List refresh failed. please try again'\n      }\n    })\n  toast.promise(loadPostTypes, {\n    success: data => data,\n    error: __('Error Occurred', 'bit-integrations'),\n    loading: __('Loading Dropbox Folders List...', 'bit-integrations'),\n  })\n}\n\nexport const handleAuthorize = (confTmp, setConf, setIsAuthorized, setIsLoading, setError) => {\n  if (!confTmp.accessCode || !confTmp.clientId || !confTmp.clientSecret) {\n    setError({\n      clientId: !confTmp.clientId ? __('Client Id can\\'t be empty', 'bit-integrations') : '',\n      clientSecret: !confTmp.clientSecret ? __('Client Secret can\\'t be empty', 'bit-integrations') : '',\n      accessCode: !confTmp.accessCode ? __('Access Code can\\'t be empty', 'bit-integrations') : '',\n    })\n    return\n  }\n  setIsLoading(true)\n\n  const tokenRequestParams = {\n    clientId: confTmp.clientId,\n    clientSecret: confTmp.clientSecret,\n    accessCode: confTmp.accessCode,\n  }\n\n  bitsFetch(tokenRequestParams, 'dropbox_authorization')\n    .then(result => result)\n    .then(result => {\n      if (result && result.success) {\n        const newConf = { ...confTmp }\n        newConf.tokenDetails = result.data\n        setConf(newConf)\n        setIsAuthorized(true)\n        toast.success(__('Authorized Successfully', 'bit-integrations'))\n      } else if ((result && result.data && result.data.data) || (!result.success && typeof result.data === 'string')) {\n        toast.error(`${__('Authorization failed Cause: ', 'bit-integrations')}${result.data.data || result.data}. ${__('please try again', 'bit-integrations')}`)\n      } else {\n        toast.error(__('Authorization failed. please try again', 'bit-integrations'))\n      }\n      setIsLoading(false)\n    })\n}\n"],"names":["__","bitsFetch","handleInput","dropboxConf","setDropboxConf","newConf","__spreadValues","name","getAllDropboxFolders","flowID","queryParams","loadPostTypes","result","toast","data","handleAuthorize","confTmp","setConf","setIsAuthorized","setIsLoading","setError","tokenRequestParams"],"mappings":"yVAAA,OAAA,KAAAA,EAAA,KAAAC,EAAA,MAAA,iBAKY,MAACC,EAAc,CAAC,EAAGC,EAAaC,IAAmB,CAC7D,MAAMC,EAAUC,EAAA,GAAKH,GACf,CAAE,KAAAI,GAAS,EAAE,OACf,EAAE,OAAO,QAAU,GACrBF,EAAQE,CAAI,EAAI,EAAE,OAAO,MAEzB,OAAOF,EAAQE,CAAI,EAErBH,EAAeE,EAAA,GAAKD,EAAS,CAC/B,EAEaG,EAAuB,CAACC,EAAQN,EAAaC,IAAmB,CAC3E,MAAMM,EAAc,CAClB,OAAQD,GAAA,KAAAA,EAAU,KAClB,SAAUN,EAAY,SACtB,aAAcA,EAAY,aAC1B,aAAcA,EAAY,YAC3B,EACKQ,EAAgBV,EAAUS,EAAa,yBAAyB,EACnE,KAAKE,GAAU,CACd,GAAIA,GAAUA,EAAO,QAAS,CAC5B,MAAMP,EAAUC,EAAA,GAAKH,GACrB,OAAIS,EAAO,KAAK,qBACdP,EAAQ,YAAcO,EAAO,KAAK,mBAClCP,EAAQ,aAAeO,EAAO,KAAK,cAGrCR,EAAeC,CAAO,EACf,6CACf,KACQ,OAAO,uDAEf,CAAK,EACHQ,EAAM,QAAQF,EAAe,CAC3B,QAASG,GAAQA,EACjB,MAAOd,EAAG,iBAAkB,kBAAkB,EAC9C,QAASA,EAAG,kCAAmC,kBAAkB,CACrE,CAAG,CACH,EAEae,EAAkB,CAACC,EAASC,EAASC,EAAiBC,EAAcC,IAAa,CAC5F,GAAI,CAACJ,EAAQ,YAAc,CAACA,EAAQ,UAAY,CAACA,EAAQ,aAAc,CACrEI,EAAS,CACP,SAAWJ,EAAQ,SAAiE,GAAtDhB,EAAG,2BAA6B,kBAAkB,EAChF,aAAegB,EAAQ,aAAyE,GAA1DhB,EAAG,+BAAiC,kBAAkB,EAC5F,WAAagB,EAAQ,WAAqE,GAAxDhB,EAAG,6BAA+B,kBAAkB,CAC5F,CAAK,EACD,MACD,CACDmB,EAAa,EAAI,EAEjB,MAAME,EAAqB,CACzB,SAAUL,EAAQ,SAClB,aAAcA,EAAQ,aACtB,WAAYA,EAAQ,UACrB,EAEDf,EAAUoB,EAAoB,uBAAuB,EAClD,KAAKT,GAAUA,CAAM,EACrB,KAAKA,GAAU,CACd,GAAIA,GAAUA,EAAO,QAAS,CAC5B,MAAMP,EAAUC,EAAA,GAAKU,GACrBX,EAAQ,aAAeO,EAAO,KAC9BK,EAAQZ,CAAO,EACfa,EAAgB,EAAI,EACpBL,EAAM,QAAQb,EAAG,0BAA2B,kBAAkB,CAAC,CAChE,MAAWY,GAAUA,EAAO,MAAQA,EAAO,KAAK,MAAU,CAACA,EAAO,SAAW,OAAOA,EAAO,MAAS,SACnGC,EAAM,MAAM,GAAGb,EAAG,+BAAgC,kBAAkB,CAAC,GAAGY,EAAO,KAAK,MAAQA,EAAO,IAAI,KAAKZ,EAAG,mBAAoB,kBAAkB,CAAC,EAAE,EAExJa,EAAM,MAAMb,EAAG,yCAA0C,kBAAkB,CAAC,EAE9EmB,EAAa,EAAK,CACxB,CAAK,CACL"}