{"version":3,"file":"bi.586.396.js","sources":["../frontend-dev/src/components/AllIntegrations/WhatsApp/WhatsAppAuthorization.jsx","../frontend-dev/src/components/AllIntegrations/WhatsApp/WhatsApp.jsx"],"sourcesContent":["import { useState } from 'react'\nimport BackIcn from '../../../Icons/BackIcn'\nimport { __ } from '../../../Utils/i18nwrap'\nimport LoaderSm from '../../Loaders/LoaderSm'\nimport { handleAuthorize } from './WhatsAppCommonFunc'\nimport tutorialLinks from '../../../Utils/StaticData/tutorialLinks'\nimport TutorialLink from '../../Utilities/TutorialLink'\n\nexport default function WhatsAppAuthorization({ formID, whatsAppConf, setWhatsAppConf, step, setstep, isLoading, setIsLoading, setSnackbar, redirectLocation, isInfo }) {\n  const [isAuthorized, setisAuthorized] = useState(false)\n  const [error, setError] = useState({ dataCenter: '', clientId: '' })\n  const { whatsApp } = tutorialLinks\n  const nextPage = () => {\n    setTimeout(() => {\n      document.getElementById('btcd-settings-wrp').scrollTop = 0\n    }, 300)\n\n    setstep(2)\n  }\n\n  const handleInput = e => {\n    const newConf = { ...whatsAppConf }\n    const rmError = { ...error }\n    rmError[e.target.name] = ''\n    newConf[e.target.name] = e.target.value\n    setError(rmError)\n    setWhatsAppConf(newConf)\n  }\n\n  return (\n    <div className=\"btcd-stp-page\" style={{ ...{ width: step === 1 && 900 }, ...{ height: step === 1 && 'auto' } }}>\n      {whatsApp?.youTubeLink && (\n        <TutorialLink\n          title={whatsApp?.title}\n          youTubeLink={whatsApp?.youTubeLink}\n        />\n      )}\n      {whatsApp?.docLink && (\n        <TutorialLink\n          title={whatsApp?.title}\n          docLink={whatsApp?.docLink}\n        />\n      )}\n\n      <div className=\"mt-3\"><b>{__('Integration Name:', 'bit-integrations')}</b></div>\n      <input className=\"btcd-paper-inp w-6 mt-1\" onChange={handleInput} name=\"name\" value={whatsAppConf.name} type=\"text\" placeholder={__('Integration Name...', 'bit-integrations')} disabled={isInfo} />\n\n      <div className=\"mt-3\"><b>{__('Phone number ID:', 'bit-integrations')}</b></div>\n      <input className=\"btcd-paper-inp w-6 mt-1\" onChange={handleInput} name=\"numberID\" value={whatsAppConf.numberID} type=\"text\" placeholder={__('Number ID...', 'bit-integrations')} disabled={isInfo} />\n\n      <div className=\"mt-3\"><b>{__('WhatsApp Business Account ID:', 'bit-integrations')}</b></div>\n      <input className=\"btcd-paper-inp w-6 mt-1\" onChange={handleInput} name=\"businessAccountID\" value={whatsAppConf.businessAccountID} type=\"text\" placeholder={__('Business Account ID...', 'bit-integrations')} disabled={isInfo} />\n\n      <div className=\"mt-3\"><b>{__('Access Token:', 'bit-integrations')}</b></div>\n      <input className=\"btcd-paper-inp w-6 mt-1\" onChange={handleInput} name=\"token\" value={whatsAppConf.token} type=\"text\" placeholder={__('Access Token...', 'bit-integrations')} disabled={isInfo} />\n      <div style={{ color: 'red', fontSize: '15px' }}>{error.clientId}</div>\n\n      <div style={{ color: 'red', fontSize: '15px' }}>{error.clientSecret}</div>\n      {!isInfo && (\n        <>\n          <button\n            onClick={() => handleAuthorize(\n              whatsAppConf,\n              setWhatsAppConf,\n              setError,\n              setisAuthorized,\n              setIsLoading,\n              setSnackbar,\n            )}\n            className=\"btn btcd-btn-lg green sh-sm flx\"\n            type=\"button\"\n            disabled={isAuthorized || isLoading}\n          >\n            {isAuthorized ? __('Authorized âœ”', 'bit-integrations') : __('Authorize', 'bit-integrations')}\n            {isLoading && <LoaderSm size={20} clr=\"#022217\" className=\"ml-2\" />}\n          </button>\n          <br />\n          <button onClick={nextPage} className=\"btn f-right btcd-btn-lg green sh-sm flx\" type=\"button\" disabled={!isAuthorized}>\n            {__('Next', 'bit-integrations')}\n            <BackIcn className=\"ml-1 rev-icn\" />\n          </button>\n        </>\n      )}\n    </div>\n  )\n}\n","import { useEffect, useState } from 'react'\nimport 'react-multiple-select-dropdown-lite/dist/index.css'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport BackIcn from '../../../Icons/BackIcn'\nimport { __ } from '../../../Utils/i18nwrap'\nimport SnackMsg from '../../Utilities/SnackMsg'\nimport Steps from '../../Utilities/Steps'\nimport { saveActionConf } from '../IntegrationHelpers/IntegrationHelpers'\nimport IntegrationStepThree from '../IntegrationHelpers/IntegrationStepThree'\n// import { saveActionConf } from '../IntegrationHelpers/IntegrationHelpers'\n// import IntegrationStepThree from '../IntegrationHelpers/IntegrationStepThree'\nimport WhatsAppAuthorization from './WhatsAppAuthorization'\nimport { handleInput, checkMappedFields } from './WhatsAppCommonFunc'\nimport WhatsAppIntegLayout from './WhatsAppIntegLayout'\n\nfunction WhatsApp({ formFields, setFlow, flow, allIntegURL }) {\n  const navigate = useNavigate()\n  const { formID } = useParams()\n  const [isLoading, setIsLoading] = useState(false)\n  const [step, setstep] = useState(1)\n  const [snack, setSnackbar] = useState({ show: false })\n  const whatsAppFields = [\n    { key: 'phone', label: 'Phone', required: true },\n  ]\n  const messageType = [\n    // { id: '1', label: 'Text' },\n    { id: '2', label: 'Template' },\n  ]\n  const [whatsAppConf, setWhatsAppConf] = useState({\n    name: 'WhatsApp',\n    type: 'WhatsApp',\n    numberID: process.env.NODE_ENV === 'development' ? '104197922315552' : '',\n    businessAccountID: process.env.NODE_ENV === 'development' ? '105802232151489' : '',\n    messageType,\n    messageTypeId: '',\n    body: '',\n    templateName: '',\n    token: process.env.NODE_ENV === 'development' ? 'EAAGKszJZAruMBAPbn3NeQ6YUe6THJHTv5qBhTr5ZAGmOhNsekyRnjYSUf2BZAZB1QotIJCKnyuikZCP0MQW4Izs65yLLSKuY8IxZBZCEaMsZBth5mqyxS4fllAZAmDRRCLZC7pMeESMBLgfyXfqs3SXgQ3tTD44XSGFee63m3sAP0UEG7U1zjeZCKsIJlxvRCCQZBKQgzXr5yNF3DgZDZD' : '',\n    field_map: [\n      { formField: '', whatsAppFormField: '' },\n    ],\n    whatsAppFields,\n    address_field: [],\n    actions: {},\n  })\n\n  const nextPage = () => {\n    setTimeout(() => {\n      document.getElementById('btcd-settings-wrp').scrollTop = 0\n    }, 300)\n\n    if (checkMappedFields(whatsAppConf)) {\n      setSnackbar({ show: true, msg: 'Please map fields to continue.' })\n      return\n    }\n    setstep(3)\n  }\n\n  const disabledButton = whatsAppConf.messageTypeId === '1' ? whatsAppConf.body === '' : whatsAppConf.templateName === ''\n\n  return (\n    <div>\n      <SnackMsg snack={snack} setSnackbar={setSnackbar} />\n      <div className=\"txt-center mt-2\"><Steps step={3} active={step} /></div>\n\n      {/* STEP 1 */}\n      <WhatsAppAuthorization\n        formID={formID}\n        whatsAppConf={whatsAppConf}\n        setWhatsAppConf={setWhatsAppConf}\n        step={step}\n        setstep={setstep}\n        isLoading={isLoading}\n        setIsLoading={setIsLoading}\n        setSnackbar={setSnackbar}\n      />\n\n      {/* STEP 2 */}\n      <div className=\"btcd-stp-page\" style={{ ...(step === 2 && { width: 900, height: 'auto', overflow: 'visible' }) }}>\n\n        <WhatsAppIntegLayout\n          formFields={formFields}\n          handleInput={(e) => handleInput(e, whatsAppConf, setWhatsAppConf, setIsLoading, setSnackbar)}\n          whatsAppConf={whatsAppConf}\n          setWhatsAppConf={setWhatsAppConf}\n          isLoading={isLoading}\n          setIsLoading={setIsLoading}\n          setSnackbar={setSnackbar}\n        />\n\n        <button\n          onClick={() => nextPage(3)}\n          disabled={disabledButton}\n          className=\"btn f-right btcd-btn-lg green sh-sm flx\"\n          type=\"button\"\n        >\n          {__('Next', 'bit-integrations')}\n          {' '}\n          &nbsp;\n          <div className=\"btcd-icn icn-arrow_back rev-icn d-in-b\" />\n        </button>\n      </div>\n      {/* STEP 3 */}\n      <IntegrationStepThree\n        step={step}\n        saveConfig={() => saveActionConf({ flow, setFlow, allIntegURL, navigate, conf: whatsAppConf, setIsLoading, setSnackbar })}\n        isLoading={isLoading}\n        dataConf={whatsAppConf}\n        setDataConf={setWhatsAppConf}\n        formFields={formFields}\n      />\n\n    </div>\n  )\n}\n\nexport default WhatsApp\n"],"names":["WhatsAppAuthorization","formID","whatsAppConf","setWhatsAppConf","step","setstep","isLoading","setIsLoading","setSnackbar","redirectLocation","isInfo","isAuthorized","setisAuthorized","useState","error","setError","whatsApp","tutorialLinks","nextPage","handleInput","e","newConf","__spreadValues","rmError","jsxs","jsx","TutorialLink","__","Fragment","handleAuthorize","LoaderSm","BackIcn","WhatsApp","formFields","setFlow","flow","allIntegURL","navigate","useNavigate","useParams","snack","whatsAppFields","messageType","checkMappedFields","disabledButton","SnackMsg","Steps","WhatsAppIntegLayout","IntegrationStepThree","saveActionConf"],"mappings":"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"}