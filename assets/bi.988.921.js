var S=Object.defineProperty;var I=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var T=(l,d,t)=>d in l?S(l,d,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[d]=t,b=(l,d)=>{for(var t in d||(d={}))V.call(d,t)&&T(l,t,d[t]);if(I)for(var t of I(d))L.call(d,t)&&T(l,t,d[t]);return l};import{r as A,j as e,L as R,m as O}from"./main-579.js";import{a6 as _,i as r,f as q,a7 as B,B as E}from"./bi.305.82.js";import{a as G}from"./bi.199.686.js";import{r as k,a as P,b as $}from"./bi.989.920.js";import{T as U}from"./bi.718.684.js";import{S as D}from"./bi.251.691.js";import{M as H}from"./bi.333.690.js";function Z({zagoMailConf:l,setZagoMailConf:d,isLoading:t,setIsLoading:i}){var j,v;const[u,m]=A.useState({show:!1,action:()=>{}}),h=(c,n)=>{var w;const a=b({},l);n==="tag"&&((w=c.target)!=null&&w.checked?(k(l,d,i),a.actions.tags=!0):(m({show:!1}),delete a.actions.tags),m({show:"tag"})),n==="update"&&(c.target.checked?a.actions.update=!0:delete a.actions.update),d(b({},a))},N=()=>{m({show:!1})},x=c=>{const n=b({},l);n.selectedTags=c,d(b({},n))};return console.log("zagoMailConf",l),e.jsxs("div",{className:"pos-rel d-flx w-8",children:[e.jsx(_,{checked:(l==null?void 0:l.selectedTags.length)||!1,onChange:c=>h(c,"tag"),className:"wdt-200 mt-4 mr-2",value:"tags",title:r("Add Tags","bit - integrations"),subTitle:r("Selects tags for contact")}),e.jsxs(q,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:r("Ok","bit-integrations"),show:u.show==="tag",close:N,action:N,title:r("Tags","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("div",{className:"mt-2",children:r("Select tags","bit-integrations")}),t.tags?e.jsx(R,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(B,{options:(j=l==null?void 0:l.tags)==null?void 0:j.map(c=>({label:c.tagName,value:c.tagId})),className:"msl-wrp-options",defaultValue:l==null?void 0:l.selectedTags,onChange:c=>x(c)}),e.jsx("button",{onClick:()=>k(l,d,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${r("Refresh Groups","bit-integrations")}'`},type:"button",children:"↻"})]})]}),e.jsx(_,{checked:((v=l.actions)==null?void 0:v.update)||!1,onChange:c=>h(c,"update"),className:"wdt-200 mt-4 mr-2",value:"user_share",title:r("Update ZagoMail","bit-integrations"),subTitle:r("Update Responses with ZagoMail existing email?","bit-integrations")})]})}function J({i:l,formFields:d,field:t,zagoMailConf:i,setZagoMailConf:u}){var a,w,F,y;const m=t.required,h=((a=i==null?void 0:i.default)==null?void 0:a.fields)&&Object.values((w=i==null?void 0:i.default)==null?void 0:w.fields).filter(s=>!s.required),N=O(E),{isPro:x}=N,j=s=>{const p=b({},i);p.field_map.splice(s,0,{}),u(p)},v=s=>{const p=b({},i);p.field_map.length>1&&p.field_map.splice(s,1),u(p)},c=(s,p)=>{const o=b({},i);o.field_map[p][s.target.name]=s.target.value,s.target.value==="custom"&&(o.field_map[p].customValue=""),u(o)},n=(s,p)=>{const o=b({},i);o.field_map[p].customValue=s.target.value,u(o)};return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:s=>c(s,l),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"List Fields",children:d==null?void 0:d.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`))}),e.jsx("option",{value:"custom",children:r("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((F=D)==null?void 0:F.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`)))})]}),t.formField==="custom"&&e.jsx(H,{onChange:s=>n(s,l),label:r("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:r("Custom Value","bit-integrations")}),e.jsxs("select",{className:"btcd-paper-inp",name:"zagoMailField",value:t.zagoMailField,onChange:s=>c(s,l),disabled:m,children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),m?((y=i==null?void 0:i.default)==null?void 0:y.fields)&&Object.values(i.default.fields).map(s=>e.jsx("option",{value:s.fieldId,children:s.fieldName},`${s.fieldId}-1`)):h&&h.map(s=>e.jsx("option",{value:s.fieldId,children:s.fieldName},`${s.fieldId}-1`))]})]}),!m&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>j(l),className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),e.jsx("button",{onClick:()=>v(l),className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:e.jsx(U,{})})]})]})}function M({formID:l,formFields:d,zagoMailConf:t,setZagoMailConf:i,isLoading:u,setIsLoading:m,setSnackbar:h}){var x,j,v;const N=c=>{const n=c.target.value,a=b({},t);n?a.listId=n:delete a.listId,$(a,i,m,h),i(b({},a))};return(x=t==null?void 0:t.default)==null||x.zagoMailLists,e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("List:","bit-integrations")}),e.jsxs("select",{value:t==null?void 0:t.listId,name:"listId",id:"",className:"btcd-paper-inp w-5",onChange:N,children:[e.jsx("option",{value:"",children:r("Select List","bit-integrations")}),((j=t==null?void 0:t.default)==null?void 0:j.zagoMailLists)&&Object.keys(t.default.zagoMailLists).map(c=>e.jsx("option",{value:t.default.zagoMailLists[c].listId,children:t.default.zagoMailLists[c].listName},`${c+1}`))]}),e.jsx("button",{onClick:()=>P(t,i,m,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh ZagoMail list"'},type:"button",disabled:u,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),u&&e.jsx(R,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,translist:"scale(0.7)"}}),e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:r("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>$(t,i,m,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${r("Refresh ZagoMail Field","bit-integrations")}'`},type:"button",disabled:u,children:"↻"})]}),((t==null?void 0:t.listId)||((v=t==null?void 0:t.default)==null?void 0:v.fields))&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("List Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("ZagoMail Fields","bit-integrations")})})]}),t.field_map.map((c,n)=>e.jsx(J,{i:n,field:c,zagoMailConf:t,formFields:d,setZagoMailConf:i},`ZagoMail-m-${n+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>G(t.field_map.length,t,i),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:r("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(Z,{zagoMailConf:t,setZagoMailConf:i,isLoading:u,setIsLoading:m})]})]})}export{M as Z};
//# sourceMappingURL=bi.988.921.js.map
