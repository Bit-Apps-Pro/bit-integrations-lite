{"version":3,"file":"bi.33.895.js","sources":["../frontend-dev/src/components/AllIntegrations/Demio/DemioCommonFunc.js"],"sourcesContent":["/* eslint-disable no-console */\n/* eslint-disable no-else-return */\nimport toast from \"react-hot-toast\";\nimport bitsFetch from \"../../../Utils/bitsFetch\";\nimport { __ } from \"../../../Utils/i18nwrap\";\n\nexport const handleInput = (e, salesmateConf, setSalesmateConf) => {\n  const newConf = { ...salesmateConf };\n  const { name } = e.target;\n  if (e.target.value !== \"\") {\n    newConf[name] = e.target.value;\n  } else {\n    delete newConf[name];\n  }\n  setSalesmateConf({ ...newConf });\n};\n\nexport const generateMappedField = (demioFields) => {\n  const requiredFlds = demioFields.filter((fld) => fld.required === true);\n  return requiredFlds.length > 0\n    ? requiredFlds.map((field) => ({\n        formField: \"\",\n        demioFormField: field.key,\n      }))\n    : [{ formField: \"\", demioFormField: \"\" }];\n};\n\nexport const checkMappedFields = (demioConf) => {\n  const mappedFields = demioConf?.field_map\n    ? demioConf.field_map.filter(\n        (mappedField) =>\n          !mappedField.formField ||\n          !mappedField.demioFormField ||\n          (mappedField.formField === \"custom\" && !mappedField.customValue) ||\n          (mappedField.demioFormField === \"customFieldKey\" &&\n            !mappedField.customFieldKey)\n      )\n    : [];\n  if (mappedFields.length > 0) {\n    return false;\n  }\n  return true;\n};\n\nexport const demioAuthentication = (\n  confTmp,\n  setConf,\n  setError,\n  setIsAuthorized,\n  loading,\n  setLoading\n) => {\n  if (!confTmp.api_key || !confTmp.api_secret) {\n    setError({\n      api_key: !confTmp.api_key\n        ? __(\"API Key can't be empty\", \"bit-integrations\")\n        : \"\",\n      api_secret: !confTmp.api_secret\n        ? __(\"API Secret can't be empty\", \"bit-integrations\")\n        : \"\",\n    });\n    return;\n  }\n\n  setError({});\n  setLoading({ ...loading, auth: true });\n\n  const requestParams = {\n    api_key: confTmp.api_key,\n    api_secret: confTmp.api_secret,\n  };\n\n  bitsFetch(requestParams, \"demio_authentication\").then((result) => {\n    if (result && result.success) {\n      setIsAuthorized(true);\n      setLoading({ ...loading, auth: false });\n      toast.success(__(\"Authorized successfully\", \"bit-integrations\"));\n      return;\n    }\n    setLoading({ ...loading, auth: false });\n    toast.error(\n      __(\n        \"Authorized failed, Please enter valid Sub Domain & API Key\",\n        \"bit-integrations\"\n      )\n    );\n  });\n};\n\nexport const getAllEvents = (confTmp, setConf, setLoading) => {\n  setLoading({ ...setLoading, event: true });\n\n  const requestParams = {\n    api_key: confTmp.api_key,\n    api_secret: confTmp.api_secret,\n  };\n\n  bitsFetch(requestParams, \"demio_fetch_all_events\").then((result) => {\n    if (result && result.success) {\n      if (result.data) {\n        setConf((prevConf) => {\n          prevConf.events = result.data;\n          return prevConf;\n        });\n\n        setLoading({ ...setLoading, event: false });\n        toast.success(__(\"Events fetched successfully\", \"bit-integrations\"));\n        return;\n      }\n      setLoading({ ...setLoading, event: false });\n      toast.error(__(\"Events Not Found!\", \"bit-integrations\"));\n      return;\n    }\n    setLoading({ ...setLoading, event: false });\n    toast.error(__(\"Events fetching failed\", \"bit-integrations\"));\n  });\n};\n\nexport const getAllSessions = (confTmp, setConf, event_id, setLoading) => {\n  setLoading({ ...setLoading, session: true });\n\n  const requestParams = {\n    api_key: confTmp.api_key,\n    api_secret: confTmp.api_secret,\n    event_id: event_id,\n  };\n\n  bitsFetch(requestParams, \"demio_fetch_all_sessions\").then((result) => {\n    if (result && result.success) {\n      if (result.data) {\n        setConf((prevConf) => {\n          prevConf.sessions = result.data;\n          return prevConf;\n        });\n\n        setLoading({ ...setLoading, session: false });\n        toast.success(__(\"Sessions fetched successfully\", \"bit-integrations\"));\n        return;\n      }\n      setLoading({ ...setLoading, session: false });\n      toast.error(__(\"Sessions Not Found!\", \"bit-integrations\"));\n      return;\n    }\n    setLoading({ ...setLoading, session: false });\n    toast.error(__(\"Sessions fetching failed\", \"bit-integrations\"));\n  });\n};\n"],"names":["__","bitsFetch","_t","handleInput","e","salesmateConf","setSalesmateConf","newConf","__spreadValues","name","generateMappedField","demioFields","requiredFlds","fld","field","checkMappedFields","demioConf","mappedField","demioAuthentication","confTmp","setConf","setError","setIsAuthorized","loading","setLoading","__spreadProps","requestParams","result","toast","getAllEvents","prevConf","getAllSessions","event_id"],"mappings":"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"}