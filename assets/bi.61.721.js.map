{"version":3,"file":"bi.61.721.js","sources":["../frontend-dev/src/components/AllIntegrations/Pods/PodHelperFunction.js","../frontend-dev/src/components/AllIntegrations/Pods/FieldMap.jsx"],"sourcesContent":["export const addFieldMap = (fldProp, i, confTmp, setConf) => {\n  const newConf = { ...confTmp }\n  newConf[fldProp].splice(i, 0, {})\n\n  setConf({ ...newConf })\n}\n\nexport const delFieldMap = (fldProp, i, confTmp, setConf) => {\n  const newConf = { ...confTmp }\n  if (newConf[fldProp].length > 1) {\n    newConf[fldProp].splice(i, 1)\n  }\n\n  setConf({ ...newConf })\n}\n\nexport const handleFieldMapping = (fldProp, event, index, conftTmp, setConf) => {\n  const newConf = { ...conftTmp }\n  newConf[fldProp][index][event.target.name] = event.target.value\n\n  setConf({ ...newConf })\n}\n\nexport const checkMappedPostFields = data => {\n  const mappedFields = data?.post_map ? data.post_map.filter(mappedField => !mappedField.formField && mappedField.postFormField && mappedField.required) : []\n  if (mappedFields.length > 0) {\n    return false\n  }\n\n  return true\n}\nexport const checkMappedPodFields = data => {\n  const mappedFields = data?.pod_map ? data.pod_map.filter(mappedField => !mappedField.formField && mappedField.podFormField && mappedField.required) : []\n  if (mappedFields.length > 0) {\n    return false\n  }\n\n  return true\n}\n","import { useRecoilValue } from 'recoil'\nimport { $btcbi } from '../../../GlobalStates'\nimport TrashIcn from '../../../Icons/TrashIcn'\nimport { __ } from '../../../Utils/i18nwrap'\nimport { SmartTagField } from '../../../Utils/StaticData/SmartTagField'\nimport TagifyInput from '../../Utilities/TagifyInput'\nimport { addFieldMap, delFieldMap, handleFieldMapping } from './PodHelperFunction'\n\nexport default function PodsFieldMap({ i, type, formFields, field, podsConf, setPodsConf, podFields, fieldType }) {\n  const fldType = {\n    post: {\n      propName: 'post_map',\n      fldName: 'postFormField',\n    },\n    pod: {\n      propName: 'pod_field_map',\n      fldName: 'podField',\n    },\n    podFile: {\n      propName: 'pod_file_map',\n      fldName: 'podFile',\n    },\n  }\n\n  const { propName, fldName } = fldType[type]\n\n  const isRequired = !!podFields.find(fl => fl.key === field[fldName] && fl.required)\n\n  const btcbi = useRecoilValue($btcbi)\n  const { isPro } = btcbi\n\n  const handleCustomValue = (event, indx) => {\n    const newConf = { ...podsConf }\n    newConf[propName][indx].customValue = event\n    setPodsConf(newConf)\n  }\n\n  return (\n    <div className=\"flx mt-2 mb-2 btcbi-field-map\">\n      <div className=\"flx integ-fld-wrp\">\n        <select className=\"btcd-paper-inp mr-2\" name=\"formField\" value={field.formField || ''} onChange={(ev) => handleFieldMapping(propName, ev, i, podsConf, setPodsConf)}>\n          <option value=\"\">{__('Select Field', 'bit-integrations')}</option>\n          {fieldType === 'fields' ? (\n            <>\n              <optgroup label=\"Form Fields\">\n                { formFields?.map(f => f.type !== 'file' && (\n                  <option key={`ff-zhcrm-${f.name}`} value={f.name}>{f.label}</option>\n                ))}\n              </optgroup>\n              <option value=\"custom\">{__('Custom...', 'bit-integrations')}</option>\n              <optgroup label={`General Smart Codes ${isPro ? '' : '(PRO)'}`}>\n                {isPro && SmartTagField?.map(f => (\n                  <option key={`ff-zhcrm-${f.name}`} value={f.name}>\n                    {f.label}\n                  </option>\n                ))}\n              </optgroup>\n            </>\n          ) : (\n\n            formFields?.map(f => f.type === 'file' && <option key={`ff-zhcrm-${f.name}`} value={f.name}>{f.label}</option>)\n\n          ) }\n        </select>\n        {field.formField === 'custom' && <TagifyInput onChange={val => handleCustomValue(val, i)} label={__('Custom Value', 'bit-integrations')} className=\"mr-2\" type=\"text\" value={field.customValue || ''} placeholder={__('type # to use trigger field', 'bit-integrations')} formFields={formFields} />}\n        <select className=\"btcd-paper-inp\" name={fldName} value={field[fldName] || ''} onChange={(ev) => handleFieldMapping(propName, ev, i, podsConf, setPodsConf)} disabled={isRequired}>\n          <option value=\"\">{__('Select Field', 'bit-integrations')}</option>\n          {\n            podFields?.map(header => (\n              <option key={`${header.key}-1`} value={header.key}>\n                {`${header.name}`}\n              </option>\n            ))\n          }\n        </select>\n      </div>\n\n      {\n        isRequired\n          ? (\n            <button\n              onClick={() => addFieldMap(propName, i, podsConf, setPodsConf)}\n              className=\"icn-btn sh-sm ml-2 mr-1\"\n              type=\"button\"\n            >\n              +\n            </button>\n          )\n          : (\n            <>\n              <button\n                onClick={() => addFieldMap(propName, i, podsConf, setPodsConf)}\n                className=\"icn-btn sh-sm ml-2 mr-1\"\n                type=\"button\"\n              >\n                +\n              </button>\n              <button onClick={() => delFieldMap(propName, i, podsConf, setPodsConf)} className=\"icn-btn sh-sm ml-1\" type=\"button\" aria-label=\"btn\">\n                <TrashIcn />\n              </button>\n            </>\n          )\n      }\n\n    </div>\n  )\n}\n"],"names":["addFieldMap","fldProp","i","confTmp","setConf","newConf","__spreadValues","delFieldMap","handleFieldMapping","event","index","conftTmp","checkMappedPostFields","data","mappedField","checkMappedPodFields","PodsFieldMap","type","formFields","field","podsConf","setPodsConf","podFields","fieldType","fldType","propName","fldName","isRequired","fl","btcbi","useRecoilValue","$btcbi","isPro","handleCustomValue","indx","jsxs","ev","jsx","__","Fragment","f","_a","SmartTagField","TagifyInput","val","header","TrashIcn"],"mappings":"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"}