{"version":3,"file":"bi.865.343.js","sources":["../frontend-dev/src/components/AllIntegrations/ZohoBigin/ZohoBigin.jsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport { useRecoilState, useRecoilValue } from 'recoil'\nimport { __ } from '../../../Utils/i18nwrap'\nimport 'react-multiple-select-dropdown-lite/dist/index.css'\nimport SnackMsg from '../../Utilities/SnackMsg'\nimport Steps from '../../Utilities/Steps'\nimport { saveActionConf, setGrantTokenResponse } from '../IntegrationHelpers/IntegrationHelpers'\nimport IntegrationStepThree from '../IntegrationHelpers/IntegrationStepThree'\nimport { handleInput } from './ZohoBiginCommonFunc'\nimport ZohoBiginIntegLayout from './ZohoBiginIntegLayout'\nimport ZohoBiginAuthorization from './ZohoBiginAuthorization'\nimport BackIcn from '../../../Icons/BackIcn'\nimport { $actionConf, $formFields, $newFlow } from '../../../GlobalStates'\n\nfunction ZohoBigin({ allIntegURL }) {\n  const navigate = useNavigate()\n  const { formID } = useParams()\n  const [flow, setFlow] = useRecoilState($newFlow)\n  const [isLoading, setIsLoading] = useState(false)\n  const [step, setstep] = useState(1)\n  const [snack, setSnackbar] = useState({ show: false })\n  const [tab, settab] = useState(0)\n  const [biginConf, setBiginConf] = useRecoilState($actionConf)\n  const formFields = useRecoilValue($formFields)\n\n  useEffect(() => {\n    window.opener && setGrantTokenResponse('zohoBigin')\n    setBiginConf({\n      name: 'Zoho Bigin',\n      type: 'Zoho Bigin',\n      clientId: process.env.NODE_ENV === 'development' ? '1000.TUNG7UIFO7DNSI1BNATM0SXJ2KRFKF' : '',\n      clientSecret: process.env.NODE_ENV === 'development' ? '946ab847ed5e6d6426adea379a4c51c24a4e92d47d' : '',\n      module: '',\n      field_map: [\n        { formField: '', zohoFormField: '' },\n      ],\n      relatedlists: [],\n      actions: {},\n    })\n  }, [])\n\n  const nextPage = () => {\n    if (!checkMappedFields(biginConf)) {\n      setSnackbar({ show: true, msg: __('Please map mandatory fields', 'bit-integrations') })\n      return\n    }\n    if (!biginConf?.pLayout) {\n      setSnackbar({ show: true, msg: __('Please select a layout', 'bit-integrations') })\n      return\n    }\n    setTimeout(() => {\n      document.getElementById('btcd-settings-wrp').scrollTop = 0\n    }, 300)\n    if (biginConf.module !== '' && biginConf.field_map.length > 0) {\n      setstep(3)\n    }\n  }\n\n  return (\n    <div>\n      <SnackMsg snack={snack} setSnackbar={setSnackbar} />\n      <div className=\"txt-center mt-2\"><Steps step={3} active={step} /></div>\n\n      {/* STEP 1 */}\n      <ZohoBiginAuthorization\n        formID={formID}\n        biginConf={biginConf}\n        setBiginConf={setBiginConf}\n        step={step}\n        setstep={setstep}\n        isLoading={isLoading}\n        setIsLoading={setIsLoading}\n        setSnackbar={setSnackbar}\n      />\n\n      {/* STEP 2 */}\n      <div className=\"btcd-stp-page\" style={{ width: step === 2 && 900, height: step === 2 && 'auto' }}>\n\n        <ZohoBiginIntegLayout\n          tab={tab}\n          settab={settab}\n          formID={formID}\n          handleInput={(e) => handleInput(e, tab, biginConf, setBiginConf, formID, setIsLoading, setSnackbar)}\n          isLoading={isLoading}\n          setIsLoading={setIsLoading}\n          setSnackbar={setSnackbar}\n        />\n\n        <button\n          onClick={() => nextPage(3)}\n          // disabled={biginConf.module === '' || biginConf.field_map.length < 1}\n          className=\"btn f-right btcd-btn-lg green sh-sm flx\"\n          type=\"button\"\n        >\n          {__('Next', 'bit-integrations')}\n          <BackIcn className=\"ml-1 rev-icn\" />\n        </button>\n\n      </div>\n\n      {/* STEP 3 */}\n      <IntegrationStepThree\n        step={step}\n        saveConfig={() => saveActionConf({ flow, setFlow, allIntegURL, conf: biginConf, navigate, setIsLoading, setSnackbar })}\n        isLoading={isLoading}\n        dataConf={biginConf}\n        setDataConf={setBiginConf}\n        formFields={formFields}\n      />\n    </div>\n  )\n}\n\nexport default ZohoBigin\n"],"names":["useNavigate","useParams","Recoil_index_20","reactExports","Recoil_index_18","jsxRuntimeExports","$newFlow","$actionConf","$formFields","SnackMsg","__","Steps","setGrantTokenResponse","saveActionConf","IntegrationStepThree","handleInput","ZohoBiginIntegLayout","ZohoBiginAuthorization","BackIcn","ZohoBigin","allIntegURL","navigate","formID","flow","setFlow","useRecoilState","isLoading","setIsLoading","useState","step","setstep","snack","setSnackbar","tab","settab","biginConf","setBiginConf","formFields","useRecoilValue","useEffect","nextPage","jsx","jsxs","e"],"mappings":"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"}