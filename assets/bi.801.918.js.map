{"version":3,"file":"bi.801.918.js","sources":["../frontend-dev/src/components/AllIntegrations/Discord/DiscordActions.jsx","../frontend-dev/src/components/AllIntegrations/Discord/DiscordIntegLayout.jsx"],"sourcesContent":["/* eslint-disable no-param-reassign */\n\nimport { useState } from 'react'\nimport { __ } from '../../../Utils/i18nwrap'\nimport ConfirmModal from '../../Utilities/ConfirmModal'\nimport TableCheckBox from '../../Utilities/TableCheckBox'\n\nexport default function DiscordActions({ formFields, discordConf, setDiscordConf }) {\n  const [actionMdl, setActionMdl] = useState({ show: false })\n  const actionHandler = (e) => {\n    const newConf = { ...discordConf }\n    if (e.target.value !== '') {\n      newConf.actions.attachments = e.target.value\n    } else {\n      delete newConf.actions.attachments\n    }\n    setDiscordConf({ ...newConf })\n  }\n  return (\n    <div className=\"pos-rel\">\n      <div className=\"d-flx flx-wrp\">\n        <TableCheckBox onChange={() => setActionMdl({ show: 'attachments' })} checked={'attachments' in discordConf.actions} className=\"wdt-200 mt-4 mr-2\" value=\"Attachment\" title={__('Attachments', 'bit-integrations')} subTitle={__('Add attachments from Bit Integrations to send Discord.', 'bit-integrations')} />\n      </div>\n\n      <ConfirmModal\n        className=\"custom-conf-mdl\"\n        mainMdlCls=\"o-v\"\n        btnClass=\"blue\"\n        btnTxt=\"Ok\"\n        show={actionMdl.show === 'attachments'}\n        close={() => setActionMdl({ show: false })}\n        action={() => setActionMdl({ show: false })}\n        title={__('Select Attachment', 'bit-integrations')}\n      >\n        <div className=\"btcd-hr mt-2\" />\n        <div className=\"mt-2\">{__('Please select file upload fields', 'bit-integrations')}</div>\n        <select onChange={(e) => actionHandler(e)} name=\"attachments\" value={discordConf.actions?.attachments} className=\"btcd-paper-inp w-10 mt-2\">\n          <option value=\"\">{__('Select file upload field', 'bit-integrations')}</option>\n          {\n            formFields.filter(itm => (itm.type === 'file')).map(itm => (\n              <option key={itm.name + 1} value={itm.name}>\n                {itm.label}\n              </option>\n            ))\n          }\n        </select>\n      </ConfirmModal>\n    </div>\n  )\n}\n","import MultiSelect from 'react-multiple-select-dropdown-lite'\nimport { useParams } from 'react-router-dom'\nimport { __ } from '../../../Utils/i18nwrap'\nimport CheckBox from '../../Utilities/CheckBox'\nimport Loader from '../../Loaders/Loader'\nimport TinyMCE from '../../Utilities/TinyMCE'\nimport DiscordActions from './DiscordActions'\nimport { getAllChannels, getAllServers } from './DiscordCommonFunc'\nimport { useEffect } from 'react'\n\nexport default function DiscordIntegLayout({ formFields,\n  discordConf,\n  setDiscordConf,\n  isLoading, setIsLoading }) {\n  const { id } = useParams()\n  const handleInput = (e) => {\n    const newConf = { ...discordConf }\n    newConf[e.target.name] = e.target.value\n    setDiscordConf(newConf)\n  }\n\n\n  const setChanges = (val, name) => {\n    const newConf = { ...discordConf }\n    newConf[name] = val\n\n    if (name === 'selectedServer' && (newConf.selectedServer !== '' || newConf.selectedServer !== null) && val) {\n      newConf.selectedChannel = ''\n      getAllChannels(newConf, setDiscordConf, setIsLoading)\n    }\n    setDiscordConf({ ...newConf })\n  }\n  const setMessageBody = (val) => {\n    const newConf = { ...discordConf }\n    newConf.body = val\n    setDiscordConf(newConf)\n  }\n  const changeActionRun = (e) => {\n    const newConf = { ...discordConf }\n    if (newConf?.body) {\n      newConf.body = ''\n    }\n    newConf.parse_mode = e.target.value\n    setDiscordConf(newConf)\n  }\n  return (\n    <>\n      <br />\n      <div className=\"flx\">\n        <b className=\"wdt-200 d-in-b\">{__('Select Servers:', 'bit-integrations')}</b>\n        <MultiSelect\n          options={discordConf?.servers?.map(Server => ({ label: Server.name, value: Server.id }))}\n          className=\"msl-wrp-options dropdown-custom-width\"\n          defaultValue={discordConf?.selectedServer}\n          onChange={val => setChanges(val, 'selectedServer')}\n          disabled={isLoading.Servers}\n          singleSelect\n        />\n        <button\n          onClick={() => getAllServers(discordConf, setDiscordConf, setIsLoading)}\n          className=\"icn-btn sh-sm ml-2 mr-2 tooltip\"\n          style={{ '--tooltip-txt': `'${__('Refresh Server List', 'bit-integrations')}'` }}\n          type=\"button\"\n          disabled={isLoading.servers}\n        >\n          &#x21BB;\n        </button>\n      </div>\n      <br />\n      {discordConf?.selectedServer && (\n        <>\n          <div className=\"flx\">\n            <b className=\"wdt-200 d-in-b\">{__('Select Channels:', 'bit-integrations')}</b>\n            <MultiSelect\n              options={discordConf?.channels?.map(Channel => ({ label: Channel.name, value: Channel.id }))}\n              className=\"msl-wrp-options dropdown-custom-width\"\n              defaultValue={discordConf?.selectedChannel}\n              onChange={val => setChanges(val, 'selectedChannel')}\n              disabled={isLoading.Channels}\n              singleSelect\n            />\n            <button\n              onClick={() => getAllChannels(discordConf, setDiscordConf, setIsLoading)}\n              className=\"icn-btn sh-sm ml-2 mr-2 tooltip\"\n              style={{ '--tooltip-txt': `'${__('Refresh Channel List', 'bit-integrations')}'` }}\n              type=\"button\"\n              disabled={isLoading.channels}\n            >\n              &#x21BB;\n            </button>\n          </div>\n        </>\n      )}\n\n      {isLoading && (\n        <Loader\n          style={{\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            height: 100,\n            transform: 'scale(0.7)',\n          }}\n        />\n      )}\n      {discordConf?.selectedChannel && discordConf?.selectedServer && (\n        <>\n          <div className=\"flx mt-4\">\n            <b className=\"wdt-200 d-in-b mr-16\">\n              {__('Messages: ', 'bit-integrations')}\n            </b>\n            <textarea\n              className=\"w-7\"\n              onChange={handleInput}\n              name=\"body\"\n              rows=\"5\"\n              value={discordConf.body}\n            />\n            <MultiSelect\n              options={formFields\n                .filter((f) => f.type !== 'file')\n                .map((f) => ({ label: f.label, value: `\\${${f.name}}` }))}\n              className=\"btcd-paper-drpdwn wdt-600 ml-2\"\n              onChange={(val) => setMessageBody(val)}\n            />\n          </div>\n          <div className=\"mt-4\">\n            <b className=\"wdt-100\">{__('Actions', 'bit-integrations')}</b>\n          </div>\n          <div className=\"btcd-hr mt-1\" />\n          <DiscordActions\n            discordConf={discordConf}\n            setDiscordConf={setDiscordConf}\n            formFields={formFields}\n          />\n        </>\n      )}\n    </>\n  )\n}\n"],"names":["DiscordActions","formFields","discordConf","setDiscordConf","actionMdl","setActionMdl","useState","actionHandler","e","newConf","__spreadValues","jsxs","jsx","TableCheckBox","__","ConfirmModal","_a","itm","DiscordIntegLayout","isLoading","setIsLoading","useParams","handleInput","setChanges","val","name","getAllChannels","setMessageBody","Fragment","MultiSelect","Server","getAllServers","_b","Channel","Loader","f"],"mappings":"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"}