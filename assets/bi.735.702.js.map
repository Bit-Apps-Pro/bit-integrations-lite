{"version":3,"file":"bi.735.702.js","sources":["../frontend-dev/src/components/AllIntegrations/ZohoCRM/ZohoCRMCommonFunc.js"],"sourcesContent":["import { __, sprintf } from '../../../Utils/i18nwrap'\nimport bitsFetch from '../../../Utils/bitsFetch'\n\nexport const handleInput = (e, recordTab, crmConf, setCrmConf, formID, setIsLoading, setSnackbar, isNew, error, setError) => {\n  let newConf = { ...crmConf }\n  if (recordTab === 0) {\n    if (isNew) {\n      const rmError = { ...error }\n      rmError[e.target.name] = ''\n      setError({ ...rmError })\n    }\n    newConf[e.target.name] = e.target.value\n  } else {\n    if (!newConf.relatedlists) {\n      newConf.relatedlists = []\n    }\n    newConf.relatedlists[recordTab - 1][e.target.name] = e.target.value\n  }\n\n  switch (e.target.name) {\n    case 'module':\n      newConf = moduleChange(recordTab, formID, newConf, setCrmConf, setIsLoading, setSnackbar)\n      break\n    case 'layout':\n      newConf = layoutChange(recordTab, formID, newConf, setCrmConf, setIsLoading, setSnackbar)\n      break\n    default:\n      break\n  }\n  setCrmConf({ ...newConf })\n}\n\nexport const handleTabChange = (recordTab, settab, formID, crmConf, setCrmConf, setIsLoading, setSnackbar) => {\n  if (recordTab) {\n    !crmConf.default?.relatedlists?.[crmConf.module] && refreshRelatedList(formID, crmConf, setCrmConf, setIsLoading, setSnackbar)\n  }\n  settab(recordTab)\n}\n\nexport const moduleChange = (recordTab, formID, crmConf, setCrmConf, setIsLoading, setSnackbar) => {\n  let newConf = { ...crmConf }\n  const module = recordTab === 0 ? newConf.module : newConf.relatedlists[recordTab - 1].module\n  if (!newConf.relatedlists[recordTab - 1]) newConf.relatedlists[recordTab - 1] = {}\n\n  if (recordTab === 0) {\n    newConf.layout = ''\n    newConf.actions = {}\n    newConf.field_map = [{ formField: '', zohoFormField: '' }]\n    newConf.upload_field_map = [{ formField: '', zohoFormField: '' }]\n\n    newConf.relatedlists = []\n  } else {\n    newConf.relatedlists[recordTab - 1].layout = ''\n    newConf.relatedlists[recordTab - 1].actions = {}\n    newConf.relatedlists[recordTab - 1].field_map = [{ formField: '', zohoFormField: '' }]\n    newConf.relatedlists[recordTab - 1].upload_field_map = [{ formField: '', zohoFormField: '' }]\n  }\n\n  if (!newConf.default.layouts?.[module]) {\n    refreshLayouts(recordTab, formID, newConf, setCrmConf, setIsLoading, setSnackbar)\n  } else {\n    const layouts = Object.keys(newConf.default.layouts?.[module])\n    if (layouts.length === 1) {\n      if (recordTab === 0) { [newConf.layout] = layouts } else { [newConf.relatedlists[recordTab - 1].layout] = layouts }\n      newConf = layoutChange(recordTab, formID, newConf, setCrmConf, setIsLoading, setSnackbar)\n    }\n  }\n\n  return newConf\n}\n\nexport const layoutChange = (recordTab, formID, crmConf, setCrmConf, setIsLoading, setSnackbar) => {\n  const newConf = { ...crmConf }\n\n  const module = recordTab === 0 ? newConf.module : newConf.relatedlists[recordTab - 1].module\n  const layout = recordTab === 0 ? newConf.layout : newConf.relatedlists[recordTab - 1].layout\n\n  if (recordTab === 0) {\n    newConf.actions = {}\n\n    newConf.field_map = newConf?.default?.layouts?.[module]?.[layout]?.required ? generateMappedField(recordTab, newConf) : [{ formField: '', zohoFormField: '' }]\n\n    newConf.upload_field_map = (newConf?.default?.layouts?.[module]?.[layout]?.requiredFileUploadFields && Object.keys(newConf.default.layouts[module][layout].requiredFileUploadFields).length > 0) ? generateMappedField(recordTab, newConf, true) : [{ formField: '', zohoFormField: '' }]\n  } else {\n    newConf.relatedlists[recordTab - 1].actions = {}\n\n    newConf.relatedlists[recordTab - 1].field_map = newConf?.default?.layouts?.[module]?.[layout]?.required ? generateMappedField(recordTab, newConf) : [{ formField: '', zohoFormField: '' }]\n\n    newConf.relatedlists[recordTab - 1].upload_field_map = (newConf?.default?.layouts?.[module]?.[layout]?.requiredFileUploadFields && Object.keys(newConf.default.layouts[module][layout].requiredFileUploadFields).length > 0) ? generateMappedField(recordTab, newConf, true) : [{ formField: '', zohoFormField: '' }]\n  }\n\n  !newConf.default.tags?.[module] && refreshTags(recordTab, formID, newConf, setCrmConf, setIsLoading, setSnackbar)\n\n  return newConf\n}\n\nexport const refreshModules = (formID, crmConf, setCrmConf, setIsLoading, setSnackbar) => {\n  setIsLoading(true)\n  const refreshModulesRequestParams = {\n    formID,\n    id: crmConf.id,\n    dataCenter: crmConf.dataCenter,\n    clientId: crmConf.clientId,\n    clientSecret: crmConf.clientSecret,\n    tokenDetails: crmConf.tokenDetails,\n  }\n  bitsFetch(refreshModulesRequestParams, 'zcrm_refresh_modules')\n    .then(result => {\n      if (result && result.success) {\n        const newConf = { ...crmConf }\n        if (!newConf.default) newConf.default = {}\n        if (result.data.modules) {\n          newConf.default.modules = result.data.modules\n        }\n        if (result.data.tokenDetails) {\n          newConf.tokenDetails = result.data.tokenDetails\n        }\n        setCrmConf({ ...newConf })\n        setSnackbar({ show: true, msg: __('Modules refreshed', 'bit-integrations') })\n      } else if ((result && result.data && result.data.data) || (!result.success && typeof result.data === 'string')) {\n        setSnackbar({ show: true, msg: sprintf(__('Modules refresh failed Cause: %s. please try again', 'bit-integrations'), result.data.data || result.data) })\n      } else {\n        setSnackbar({ show: true, msg: __('Modules refresh failed. please try again', 'bit-integrations') })\n      }\n      setIsLoading(false)\n    })\n    .catch(() => setIsLoading(false))\n}\n\nexport const refreshLayouts = (recordTab, formID, crmConf, setCrmConf, setIsLoading, setSnackbar) => {\n  const newConf = { ...crmConf }\n  const module = recordTab === 0 ? newConf.module : newConf.relatedlists[recordTab - 1].module\n  if (!module) {\n    return\n  }\n  setIsLoading(true)\n  const refreshLayoutsRequestParams = {\n    formID,\n    module,\n    dataCenter: newConf.dataCenter,\n    clientId: newConf.clientId,\n    clientSecret: newConf.clientSecret,\n    tokenDetails: newConf.tokenDetails,\n  }\n  bitsFetch(refreshLayoutsRequestParams, 'zcrm_refresh_layouts')\n    .then(result => {\n      if (result && result.success) {\n        if (result.data.layouts) {\n          if (!newConf.default.layouts) newConf.default.layouts = {}\n          newConf.default.layouts[module] = result.data.layouts\n          const layouts = [...Object.keys(result.data.layouts)]\n          if (layouts.length === 1) {\n            if (recordTab === 0) {\n              [newConf.layout] = layouts\n              newConf.field_map = generateMappedField(recordTab, newConf)\n              if (Object.keys(result.data.layouts[layouts].fileUploadFields).length > 0) {\n                newConf.upload_field_map = generateMappedField(recordTab, newConf, true)\n              }\n            } else {\n              [newConf.relatedlists[recordTab - 1].layout] = layouts\n              newConf.relatedlists[recordTab - 1].field_map = generateMappedField(recordTab, newConf)\n\n              if (Object.keys(result.data.layouts[layouts].fileUploadFields).length > 0) {\n                newConf.relatedlists[recordTab - 1].upload_field_map = generateMappedField(recordTab, newConf, true)\n              }\n            }\n\n            if (!newConf.default.tags?.[module]) refreshTags(recordTab, formID, newConf, setCrmConf, setIsLoading, setSnackbar)\n          }\n        }\n        if (result.data.tokenDetails) {\n          newConf.tokenDetails = result.data.tokenDetails\n        }\n        setCrmConf({ ...newConf })\n        setSnackbar({ show: true, msg: __('Layouts refreshed', 'bit-integrations') })\n      } else if ((result?.data?.data) || (!result.success && typeof result.data === 'string')) {\n        setSnackbar({ show: true, msg: sprintf(__('Layouts refresh failed Cause: %s. please try again', 'bit-integrations'), result.data.data || result.data) })\n      } else {\n        setSnackbar({ show: true, msg: __('Layouts refresh failed. please try again', 'bit-integrations') })\n      }\n      setIsLoading(false)\n    })\n    .catch(() => setIsLoading(false))\n}\n\nexport const refreshRelatedList = (formID, crmConf, setCrmConf, setIsLoading, setSnackbar) => {\n  if (!crmConf.module) {\n    return\n  }\n  setIsLoading(true)\n  const relatedListRequestParams = {\n    formID,\n    module: crmConf.module,\n    dataCenter: crmConf.dataCenter,\n    clientId: crmConf.clientId,\n    clientSecret: crmConf.clientSecret,\n    tokenDetails: crmConf.tokenDetails,\n  }\n  bitsFetch(relatedListRequestParams, 'zcrm_get_related_lists')\n    .then(result => {\n      if (result && result.success) {\n        const newConf = { ...crmConf }\n        if (result.data.relatedLists) {\n          if (!newConf.default.relatedlists) {\n            newConf.default.relatedlists = {}\n          }\n          newConf.default.relatedlists[newConf.module] = { ...result.data.relatedLists }\n        }\n        if (result.data.tokenDetails) {\n          newConf.tokenDetails = result.data.tokenDetails\n        }\n        setCrmConf({ ...newConf })\n        setSnackbar({ show: true, msg: __('RelatedLists refreshed', 'bit-integrations') })\n      } else if ((result?.data?.data) || (!result.success && typeof result.data === 'string')) {\n        setSnackbar({ show: true, msg: `${__('RelatedLists refresh failed Cause:')}${result.data.data || result.data}. ${__('please try again', 'bit-integrations')}` })\n      } else {\n        setSnackbar({ show: true, msg: __('RelatedLists refresh failed. please try again', 'bit-integrations') })\n      }\n      setIsLoading(false)\n    })\n    .catch(() => setIsLoading(false))\n}\n\nexport const refreshTags = (recordTab, formID, crmConf, setCrmConf, setIsLoading, setSnackbar) => {\n  const module = recordTab === 0 ? crmConf.module : crmConf.relatedlists[recordTab - 1].module\n  if (!module) return\n  setIsLoading(true)\n  const refreshTagsParams = {\n    formID,\n    module,\n    dataCenter: crmConf.dataCenter,\n    clientId: crmConf.clientId,\n    clientSecret: crmConf.clientSecret,\n    tokenDetails: crmConf.tokenDetails,\n  }\n  bitsFetch(refreshTagsParams, 'zcrm_get_tags')\n    .then(result => {\n      if (result?.success) {\n        const newConf = { ...crmConf }\n        if (result.data.tags) {\n          if (!newConf.default.tags) {\n            newConf.default.tags = {}\n          }\n          newConf.default.tags[module] = { ...result.data.tags }\n        }\n        if (result.data.tokenDetails) {\n          newConf.tokenDetails = result.data.tokenDetails\n        }\n        setCrmConf({ ...newConf })\n        setSnackbar({ show: true, msg: __('Tags refreshed', 'bit-integrations') })\n      } else if ((result?.data?.data) || (!result.success && typeof result.data === 'string')) {\n        setSnackbar({ show: true, msg: `${__('Tags refresh failed Cause:', 'bit-integrations')}${result.data.data || result.data}. ${__('please try again', 'bit-integrations')}` })\n      } else {\n        setSnackbar({ show: true, msg: __('Tags refresh failed. please try again', 'bit-integrations') })\n      }\n      setIsLoading(false)\n    })\n    .catch(() => setIsLoading(false))\n}\n\nexport const refreshOwners = (formID, crmConf, setCrmConf, setIsLoading, setSnackbar) => {\n  setIsLoading(true)\n  const getOwnersParams = {\n    formID,\n    dataCenter: crmConf.dataCenter,\n    clientId: crmConf.clientId,\n    clientSecret: crmConf.clientSecret,\n    tokenDetails: crmConf.tokenDetails,\n  }\n  bitsFetch(getOwnersParams, 'zcrm_get_users')\n    .then(result => {\n      if (result?.success) {\n        const newConf = { ...crmConf }\n        newConf.default.crmOwner = result.data.users\n        if (result.data.tokenDetails) {\n          newConf.tokenDetails = result.data.tokenDetails\n        }\n        setCrmConf({ ...newConf })\n        setSnackbar({ show: true, msg: __('Owners refreshed', 'bit-integrations') })\n      } else {\n        setSnackbar({ show: true, msg: __('Owners refresh failed. please try again', 'bit-integrations') })\n      }\n      setIsLoading(false)\n    })\n    .catch(() => setIsLoading(false))\n}\n\nexport const refreshAssigmentRules = (recordTab, crmConf, setCrmConf, setIsLoading, setSnackbar) => {\n  const module = recordTab === 0 ? crmConf.module : crmConf.relatedlists[recordTab - 1].module\n  if (!module) return\n  setIsLoading(true)\n  const getAssigmentRulesParams = {\n    module,\n    dataCenter: crmConf.dataCenter,\n    clientId: crmConf.clientId,\n    clientSecret: crmConf.clientSecret,\n    tokenDetails: crmConf.tokenDetails,\n  }\n  bitsFetch(getAssigmentRulesParams, 'zcrm_get_assignment_rules')\n    .then(result => {\n      if (result?.success) {\n        const newConf = { ...crmConf }\n        if (!newConf.default.assignmentRules) {\n          newConf.default.assignmentRules = {}\n        }\n        if (result.data.tokenDetails) {\n          newConf.tokenDetails = result.data.tokenDetails\n        }\n        newConf.default.assignmentRules[module] = { ...result.data.assignmentRules }\n        setCrmConf({ ...newConf })\n        setSnackbar({ show: true, msg: __('Assignment Rules refreshed', 'bit-integrations') })\n      } else {\n        setSnackbar({ show: true, msg: __('Assignment Rules refresh failed. please try again', 'bit-integrations') })\n      }\n      setIsLoading(false)\n    })\n    .catch(() => setIsLoading(false))\n}\n\nexport const generateMappedField = (recordTab, crmConf, uploadFields) => {\n  const module = recordTab === 0 ? crmConf.module : crmConf.relatedlists[recordTab - 1].module\n  const layout = recordTab === 0 ? crmConf.layout : crmConf.relatedlists[recordTab - 1].layout\n\n  if (uploadFields) {\n    return crmConf.default.layouts[module][layout].requiredFileUploadFields.length > 0 ? crmConf.default.layouts[module][layout].requiredFileUploadFields.map(field => ({ formField: '', zohoFormField: field })) : [{ formField: '', zohoFormField: '' }]\n  }\n  return crmConf.default.layouts[module][layout].required.length > 0 ? crmConf.default.layouts[module][layout].required.map(field => ({ formField: '', zohoFormField: field })) : [{ formField: '', zohoFormField: '' }]\n}\n\nexport const checkMappedFields = (crmConf) => {\n  const mappedFields = crmConf?.field_map ? crmConf.field_map.filter(mappedField => (!mappedField.formField && mappedField.zohoFormField && crmConf?.default?.layouts?.[crmConf.module]?.[crmConf.layout]?.required.indexOf(mappedField.zohoFormField) !== -1)) : []\n  const mappedUploadFields = crmConf?.upload_field_map ? crmConf.upload_field_map.filter(mappedField => (!mappedField.formField && mappedField.zohoFormField && crmConf.default.layouts[crmConf.module][crmConf.layout].requiredFileUploadFields.indexOf(mappedField.zohoFormField) !== -1)) : []\n  const mappedRelatedFields = crmConf.relatedlists.map(relatedlist => relatedlist.field_map.filter(mappedField => !mappedField.formField && mappedField.zohoFormField))\n  const mappedRelatedUploadFields = crmConf.relatedlists.map(relatedlist => relatedlist.upload_field_map.filter(mappedField => !mappedField.formField && mappedField.zohoFormField))\n\n  if (mappedFields.length > 0 || mappedUploadFields.length > 0 || mappedRelatedFields.some(relatedField => relatedField.length) || mappedRelatedUploadFields.some(relatedField => relatedField.length)) {\n    return false\n  }\n\n  return true\n}\n"],"names":["handleInput","e","recordTab","crmConf","setCrmConf","formID","setIsLoading","setSnackbar","isNew","error","setError","newConf","__spreadValues","rmError","moduleChange","layoutChange","handleTabChange","settab","_b","_a","refreshRelatedList","module","refreshLayouts","layouts","layout","_d","_c","generateMappedField","_h","_g","_f","_e","_l","_k","_j","_i","_p","_o","_n","_m","_q","refreshTags","refreshModules","refreshModulesRequestParams","bitsFetch","result","__","sprintf","refreshLayoutsRequestParams","relatedListRequestParams","refreshTagsParams","refreshOwners","getOwnersParams","refreshAssigmentRules","getAssigmentRulesParams","uploadFields","field","checkMappedFields","mappedFields","mappedField","mappedUploadFields","mappedRelatedFields","relatedlist","mappedRelatedUploadFields","relatedField"],"mappings":"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"}