{"version":3,"file":"bi.400.770.js","sources":["../frontend-dev/src/components/AllIntegrations/Freshdesk/FreshdeskCommonFunc.js"],"sourcesContent":["/* eslint-disable no-else-return */\nimport { __ } from '../../../Utils/i18nwrap'\nimport bitsFetch from '../../../Utils/bitsFetch'\n\nexport const handleInput = (e, slackConf, setSlackConf) => {\n  const newConf = { ...slackConf }\n  const { name } = e.target\n  if (e.target.value !== '') {\n    newConf[name] = e.target.value\n  } else {\n    delete newConf[name]\n  }\n  setSlackConf({ ...newConf })\n}\n\nexport const handleAuthorize = (confTmp, setConf, setError, setisAuthorized, setIsLoading, setSnackbar) => {\n  if (!confTmp.api_key) {\n    setError({ api_key: !confTmp.api_key ? __('Api Key can\\'t be empty', 'bit-integrations') : '' })\n    return\n  }\n\n  setError({})\n  setIsLoading(true)\n\n  const tokenRequestParams = { app_domain: confTmp.app_domain, api_key: confTmp.api_key }\n\n  bitsFetch(tokenRequestParams, 'freshdesk_authorization_and_fetch_tickets')\n    .then(result => result)\n    .then(result => {\n      if (result && result.success) {\n        const newConf = { ...confTmp }\n        newConf.tokenDetails = result.data\n        setConf(newConf)\n        setisAuthorized(true)\n        setSnackbar({ show: true, msg: __('Authorized Successfully', 'bit-integrations') })\n      } else if ((result && result.data && result.data.data) || (!result.success && typeof result.data === 'string')) {\n        setSnackbar({ show: true, msg: `${__('Authorization failed Cause:', 'bit-integrations')}${result.data.data || result.data}. ${__('please try again', 'bit-integrations')}` })\n      } else {\n        setSnackbar({ show: true, msg: __('Authorization failed. please try again', 'bit-integrations') })\n      }\n      setIsLoading(false)\n    })\n}\n\nexport const checkMappedFields = fieldsMapped => {\n  const checkedField = fieldsMapped\n    ? fieldsMapped?.filter(item => (!item.formField || !item.freshdeskFormField))\n    : []\n  if (checkedField.length > 0) return false\n  return true\n}\n\nexport const checkMappedFieldsContact = fieldsMapped => {\n  const checkedField = fieldsMapped\n    ? fieldsMapped?.filter(item => (!item.formField || !item.contactFreshdeskFormField))\n    : []\n  if (checkedField.length > 0) return false\n  return true\n}\n\nexport const generateMappedField = (freshdeskConf) => {\n  const requiredFlds = freshdeskConf?.ticketFields.filter(fld => fld.required === true)\n  return requiredFlds.length > 0 ? requiredFlds.map(field => ({ formField: '', freshdeskFormField: field.key })) : [{ formField: '', freshdeskFormField: '' }]\n}\n\nexport const generateContactMappedField = (freshdeskConf) => {\n  const requiredFlds = freshdeskConf?.contactFields.filter(fld => fld.required === true)\n  return requiredFlds.length > 0 ? requiredFlds.map(field => ({ formField: '', contactFreshdeskFormField: field.key })) : [{ formField: '', contactFreshdeskFormField: '' }]\n}\n"],"names":["__","bitsFetch","handleInput","slackConf","setSlackConf","newConf","__spreadValues","name","handleAuthorize","confTmp","setConf","setError","setisAuthorized","setIsLoading","setSnackbar","tokenRequestParams","result","checkMappedFields","fieldsMapped","item","checkMappedFieldsContact","generateMappedField","freshdeskConf","requiredFlds","fld","field","generateContactMappedField"],"mappings":"yVAAA,OAAA,KAAAA,EAAA,KAAAC,MAAA,iBAIY,MAACC,EAAc,CAAC,EAAGC,EAAWC,IAAiB,CACzD,MAAMC,EAAUC,EAAA,GAAKH,GACf,CAAE,KAAAI,GAAS,EAAE,OACf,EAAE,OAAO,QAAU,GACrBF,EAAQE,CAAI,EAAI,EAAE,OAAO,MAEzB,OAAOF,EAAQE,CAAI,EAErBH,EAAaE,EAAA,GAAKD,EAAS,CAC7B,EAEaG,EAAkB,CAACC,EAASC,EAASC,EAAUC,EAAiBC,EAAcC,IAAgB,CACzG,GAAI,CAACL,EAAQ,QAAS,CACpBE,EAAS,CAAE,QAAUF,EAAQ,QAA8D,GAApDT,EAAG,yBAA2B,kBAAkB,EAAQ,EAC/F,MACD,CAEDW,EAAS,CAAA,CAAE,EACXE,EAAa,EAAI,EAEjB,MAAME,EAAqB,CAAE,WAAYN,EAAQ,WAAY,QAASA,EAAQ,OAAS,EAEvFR,EAAUc,EAAoB,2CAA2C,EACtE,KAAKC,GAAUA,CAAM,EACrB,KAAKA,GAAU,CACd,GAAIA,GAAUA,EAAO,QAAS,CAC5B,MAAMX,EAAUC,EAAA,GAAKG,GACrBJ,EAAQ,aAAeW,EAAO,KAC9BN,EAAQL,CAAO,EACfO,EAAgB,EAAI,EACpBE,EAAY,CAAE,KAAM,GAAM,IAAKd,EAAG,0BAA2B,kBAAkB,EAAG,CACnF,MAAWgB,GAAUA,EAAO,MAAQA,EAAO,KAAK,MAAU,CAACA,EAAO,SAAW,OAAOA,EAAO,MAAS,SACnGF,EAAY,CAAE,KAAM,GAAM,IAAK,GAAGd,EAAG,8BAA+B,kBAAkB,CAAC,GAAGgB,EAAO,KAAK,MAAQA,EAAO,IAAI,KAAKhB,EAAG,mBAAoB,kBAAkB,CAAC,GAAI,EAE5Kc,EAAY,CAAE,KAAM,GAAM,IAAKd,EAAG,yCAA0C,kBAAkB,EAAG,EAEnGa,EAAa,EAAK,CACxB,CAAK,CACL,EAEaI,EAAoBC,GAI3B,GAHiBA,EACjBA,GAAA,YAAAA,EAAc,OAAOC,GAAS,CAACA,EAAK,WAAa,CAACA,EAAK,oBACvD,CAAE,GACW,OAAS,GAIfC,EAA2BF,GAIlC,GAHiBA,EACjBA,GAAA,YAAAA,EAAc,OAAOC,GAAS,CAACA,EAAK,WAAa,CAACA,EAAK,2BACvD,CAAE,GACW,OAAS,GAIfE,EAAuBC,GAAkB,CACpD,MAAMC,EAAeD,GAAA,YAAAA,EAAe,aAAa,OAAOE,GAAOA,EAAI,WAAa,IAChF,OAAOD,EAAa,OAAS,EAAIA,EAAa,IAAIE,IAAU,CAAE,UAAW,GAAI,mBAAoBA,EAAM,GAAK,EAAC,EAAI,CAAC,CAAE,UAAW,GAAI,mBAAoB,GAAI,CAC7J,EAEaC,EAA8BJ,GAAkB,CAC3D,MAAMC,EAAeD,GAAA,YAAAA,EAAe,cAAc,OAAOE,GAAOA,EAAI,WAAa,IACjF,OAAOD,EAAa,OAAS,EAAIA,EAAa,IAAIE,IAAU,CAAE,UAAW,GAAI,0BAA2BA,EAAM,GAAK,EAAC,EAAI,CAAC,CAAE,UAAW,GAAI,0BAA2B,GAAI,CAC3K"}