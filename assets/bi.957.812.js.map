{"version":3,"file":"bi.957.812.js","sources":["../frontend-dev/src/components/AllIntegrations/Mailercloud/MailercloudFieldMap.jsx","../frontend-dev/src/components/AllIntegrations/Mailercloud/MailercloudIntegLayout.jsx"],"sourcesContent":["import { useRecoilValue } from 'recoil'\nimport { $btcbi } from '../../../GlobalStates'\nimport { __ } from '../../../Utils/i18nwrap'\nimport { SmartTagField } from '../../../Utils/StaticData/SmartTagField'\nimport MtInput from '../../Utilities/MtInput'\nimport TagifyInput from '../../Utilities/TagifyInput'\nimport { addFieldMap, delFieldMap, handleFieldMapping } from '../GlobalIntegrationHelper'\nimport { handleCustomValue } from '../IntegrationHelpers/IntegrationHelpers'\nimport { generateMappedField } from './MailercloudCommonFunc'\n\nfunction MailercloudFieldMap({ i, field, formFields, mailercloudConf, setMailercloudConf }) {\n  const btcbi = useRecoilValue($btcbi)\n  const { isPro } = btcbi\n\n  if (mailercloudConf?.field_map?.length === 1 && field.mailercloudFormField === '') {\n    const newConf = { ...mailercloudConf }\n    const tmp = generateMappedField(newConf)\n    newConf.field_map = tmp\n    setMailercloudConf(newConf)\n  }\n\n  const requiredFields = mailercloudConf?.default?.fields.filter(fld => fld.required === true) || []\n\n  const nonrequiredFields = mailercloudConf?.default?.fields.filter(fld => fld.required === false) || []\n\n\n  return (\n    <div\n      className=\"flx mt-2 mb-2 btcbi-field-map\"\n    >\n      <div className=\"pos-rel flx\">\n        <div className=\"flx integ-fld-wrp\">\n          <select\n            className=\"btcd-paper-inp mr-2\"\n            name=\"formField\"\n            onChange={(event) => {\n              handleFieldMapping(event, i, mailercloudConf, setMailercloudConf)\n            }}\n            value={field.formField || ''}\n          >\n            <option value=\"\">{__('Select Field')}</option>\n            <optgroup label=\"Form Fields\">\n              {\n                formFields?.map(f => (\n                  <option key={`ff-rm-${f.name}`} value={f.name}>\n                    {f.label}\n                  </option>\n                ))\n              }\n            </optgroup>\n            <option value=\"custom\">{__('Custom...')}</option>\n            <optgroup label={`General Smart Codes ${isPro ? '' : '(PRO)'}`}>\n              {isPro && SmartTagField?.map(f => (\n                <option key={`ff-rm-${f.name}`} value={f.name}>\n                  {f.label}\n                </option>\n              ))}\n            </optgroup>\n\n          </select>\n\n          {/* When user select custom field */}\n\n          {field.formField === 'custom' && <TagifyInput onChange={e => handleCustomValue(e, i, mailercloudConf, setMailercloudConf)} label={__('Custom Value', 'bit-integrations')} className=\"mr-2\" type=\"text\" value={field.customValue} placeholder={__('Custom Value', 'bit-integrations')} formFields={formFields} />}\n\n          <select\n            className=\"btcd-paper-inp\"\n            disabled={i < requiredFields.length}\n            name=\"mailercloudFormField\"\n            onChange={(event) => {\n              handleFieldMapping(event, i, mailercloudConf, setMailercloudConf)\n            }}\n            value={i < requiredFields.length ? (requiredFields[i].key || '') : (field.mailercloudFormField || '')}\n          >\n            <option value=\"\">{__('Select Field')}</option>\n            {\n              i < requiredFields.length ? (\n                <option key={requiredFields[i].key} value={requiredFields[i].key}>\n                  {requiredFields[i].label}\n                </option>\n              ) : (\n                nonrequiredFields.map(({ key, label }) => (\n                  <option key={key} value={key}>\n                    {label}\n                  </option>\n                ))\n              )\n            }\n          </select>\n        </div>\n\n        <button\n          onClick={() => addFieldMap(i, mailercloudConf, setMailercloudConf)}\n          className=\"icn-btn sh-sm ml-2 mr-1\"\n          type=\"button\"\n        >\n          +\n        </button>\n        <button onClick={() => delFieldMap(i, mailercloudConf, setMailercloudConf)} className=\"icn-btn sh-sm ml-1\" type=\"button\" aria-label=\"btn\">\n          <span className=\"btcd-icn icn-trash-2\" />\n        </button>\n\n      </div>\n    </div>\n  )\n}\n\nexport default MailercloudFieldMap\n","/* eslint-disable default-case */\n/* eslint-disable no-console */\nimport { __ } from '../../../Utils/i18nwrap'\nimport Loader from '../../Loaders/Loader'\nimport { addFieldMap } from '../GlobalIntegrationHelper'\nimport MailercloudFieldMap from './MailercloudFieldMap'\nimport LoaderSm from '../../Loaders/LoaderSm'\nimport { getAllFields, getAllLists } from './MailercloudCommonFunc'\n\nfunction MailercloudIntegLayout({ mailercloudConf, setMailercloudConf, formFields, loading, setLoading }) {\n  const contactTypeList = ['active', 'bounce', 'abuse', 'unsubscribe', 'suppressed', 'spam complaints']\n  const handleList = (e) => {\n    const newConf = { ...mailercloudConf }\n    const { name, value } = e.target\n    if (value !== '') {\n      newConf[name] = value\n    } else {\n      delete newConf[name]\n    }\n    switch (name) {\n      case 'listId':\n        newConf.field_map = [{ formField: '', mailercloudFormField: '' }]\n        newConf.contactType = ''\n\n        break\n    }\n    getAllFields(newConf, setMailercloudConf, loading, setLoading)\n    setMailercloudConf({ ...newConf })\n  }\n\n  return (\n    <div className=\"mt-2\">\n\n      {!loading.page && (\n        <div className=\"flx mt-2\">\n          <b className=\"wdt-200 d-in-b \">{__('List:')}</b>\n          <select onChange={handleList} name=\"listId\" value={mailercloudConf?.listId} className=\"btcd-paper-inp w-5 mx-0\">\n            <option value=\"\">{__('Select List')}</option>\n            {\n              mailercloudConf?.default?.lists && mailercloudConf.default.lists.map(list => (\n                <option key={list.id} value={list.id}>\n                  {list.name}\n                </option>\n              ))\n\n            }\n          </select>\n          <button onClick={() => getAllLists(mailercloudConf, setMailercloudConf, loading, setLoading)} className=\"icn-btn sh-sm ml-2 mr-2 tooltip\" style={{ '--tooltip-txt': '\"Refresh list\"' }} type=\"button\" disabled={loading.list}>&#x21BB;</button>\n          {loading.list && <LoaderSm size=\"20\" clr=\"#022217\" className=\"ml-2\" />}\n        </div>\n      )}\n\n      {mailercloudConf.listId && (\n        <div className=\"flx mt-2\">\n          <b className=\"wdt-200 d-in-b \">{__('Contact type:')}</b>\n          <select onChange={handleList} name=\"contactType\" value={mailercloudConf?.contactType} className=\"btcd-paper-inp w-5 mx-0\">\n            <option value=\"\">{__('Select Type')}</option>\n            {\n              contactTypeList.map(type => (\n                <option key={type} value={type}>\n                  {type.toUpperCase()}\n                </option>\n              ))\n\n            }\n          </select>\n        </div>\n      )}\n      <div className=\"mt-4\">\n        <b className=\"wdt-100\">{__('Map Fields', 'bit-integrations')}</b>\n        <button onClick={() => getAllFields(mailercloudConf, setMailercloudConf, loading, setLoading)} className=\"icn-btn sh-sm ml-2 mr-2 tooltip\" style={{ '--tooltip-txt': `'${__('Refresh Mailer Cloud Field', 'bit-integrations')}'` }} type=\"button\" disabled={loading.field}>&#x21BB;</button>\n      </div>\n\n      {/* --- PAGE Loader --- */}\n\n      {(loading.page || loading.field) && (\n        <Loader style={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: 100,\n          transform: 'scale(0.7)',\n        }}\n        />\n      )}\n      {mailercloudConf?.listId && mailercloudConf.default.fields && (\n        <div className=\"mt-5\">\n          <b className=\"wdt-100\">\n            {__('Field Map')}\n          </b>\n\n          <div className=\"btcd-hr mt-2 mb-4\" />\n          <div className=\"flx flx-around mt-2 mb-2 btcbi-field-map-label\">\n            <div className=\"txt-dp\"><b>{__('Form Fields')}</b></div>\n            <div className=\"txt-dp\"><b>{__('Mailercloud Fields')}</b></div>\n          </div>\n          {mailercloudConf?.field_map.map((itm, i) => (\n            <MailercloudFieldMap\n              key={`ko-m-${i + 8}`}\n              i={i}\n              field={itm}\n              formFields={formFields}\n              mailercloudConf={mailercloudConf}\n              setMailercloudConf={setMailercloudConf}\n            />\n          ))}\n          <div className=\"txt-center btcbi-field-map-button mt-2\"><button onClick={() => addFieldMap(mailercloudConf.field_map.length, mailercloudConf, setMailercloudConf, false)} className=\"icn-btn sh-sm\" type=\"button\">+</button></div>\n\n        </div>\n      )}\n\n    </div>\n  )\n}\n\nexport default MailercloudIntegLayout\n"],"names":["Recoil_index_18","jsxRuntimeExports","Loader","$btcbi","__","LoaderSm","handleFieldMapping","addFieldMap","delFieldMap","SmartTagField","TagifyInput","handleCustomValue","generateMappedField","getAllLists","getAllFields","MailercloudFieldMap","i","field","formFields","mailercloudConf","setMailercloudConf","_a","_b","_c","_d","btcbi","useRecoilValue","isPro","newConf","__spreadValues","tmp","requiredFields","fld","nonrequiredFields","jsx","jsxs","event","f","e","key","label","MailercloudIntegLayout","loading","setLoading","contactTypeList","handleList","name","value","list","type","itm"],"mappings":"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"}