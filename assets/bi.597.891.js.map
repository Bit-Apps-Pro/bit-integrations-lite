{"version":3,"file":"bi.597.891.js","sources":["../frontend-dev/src/components/AllIntegrations/Gravitec/GravitecCommonFunc.js"],"sourcesContent":["/* eslint-disable no-console */\n/* eslint-disable no-else-return */\nimport toast from \"react-hot-toast\"\nimport bitsFetch from \"../../../Utils/bitsFetch\"\nimport { __ } from \"../../../Utils/i18nwrap\"\n\nexport const handleInput = (e, salesmateConf, setSalesmateConf) => {\n  const newConf = { ...salesmateConf }\n  const { name } = e.target\n  if (e.target.value !== \"\") {\n    newConf[name] = e.target.value\n  } else {\n    delete newConf[name]\n  }\n  setSalesmateConf({ ...newConf })\n}\n\nexport const generateMappedField = (notificationFields) => {\n  const requiredFlds = notificationFields.filter((fld) => fld.required === true)\n  return requiredFlds.length > 0\n    ? requiredFlds.map((field) => ({\n      formField: \"\",\n      gravitecFormField: field.key,\n    }))\n    : [{ formField: \"\", gravitecFormField: \"\" }]\n}\n\nexport const checkMappedFields = (gravitecConf) => {\n  const mappedFields = gravitecConf?.field_map\n    ? gravitecConf.field_map.filter(\n      (mappedField) =>\n        !mappedField.formField ||\n        !mappedField.gravitecFormField ||\n        (mappedField.formField === \"custom\" && !mappedField.customValue) ||\n        (mappedField.gravitecFormField === \"customFieldKey\" &&\n          !mappedField.customFieldKey)\n    )\n    : []\n  if (mappedFields.length > 0) {\n    return false\n  }\n  return true\n}\n\nexport const gravitecAuthentication = (\n  confTmp,\n  setConf,\n  setError,\n  setIsAuthorized,\n  loading,\n  setLoading\n) => {\n  if (!confTmp.site_url ||!confTmp.app_key || !confTmp.app_secret) {\n    setError({\n      site_url: !confTmp.site_url\n        ? __(\"Site Url can't be empty\", \"bit-integrations\")\n        : \"\",\n      app_key: !confTmp.app_key\n        ? __(\"App Key can't be empty\", \"bit-integrations\")\n        : \"\",\n      app_secret: !confTmp.app_secret\n        ? __(\"App Secret can't be empty\", \"bit-integrations\")\n        : \"\",\n    })\n    return\n  }\n\n  setError({})\n  setLoading({ ...loading, auth: true })\n\n  const requestParams = {\n    site_url: confTmp.site_url,\n    app_key: confTmp.app_key,\n    app_secret: confTmp.app_secret\n  }\n\n  bitsFetch(requestParams, \"gravitec_authentication\").then((result) => {\n    if (result && result.success) {\n      setIsAuthorized(true)\n      setLoading({ ...loading, auth: false })\n      toast.success(__(\"Authorized successfully\", \"bit-integrations\"))\n      return\n    }\n    setLoading({ ...loading, auth: false })\n    toast.error(\n      __(\"Authorized failed, Please enter valid Public Id & Secret Key\", \"bit-integrations\")\n    )\n  })\n}\n"],"names":["__","bitsFetch","_t","handleInput","salesmateConf","setSalesmateConf","newConf","__spreadValues","name","generateMappedField","notificationFields","requiredFlds","fld","field","checkMappedFields","gravitecConf","mappedField","gravitecAuthentication","confTmp","setConf","setError","setIsAuthorized","loading","setLoading","__spreadProps","requestParams","result","toast"],"mappings":"6aAAA,OAAA,KAAAA,EAAA,KAAAC,EAAA,KAAAC,MAAA,iBAMY,MAACC,EAAc,CAAC,EAAGC,EAAeC,IAAqB,CACjE,MAAMC,EAAUC,EAAA,GAAKH,GACf,CAAE,KAAAI,GAAS,EAAE,OACf,EAAE,OAAO,QAAU,GACrBF,EAAQE,CAAI,EAAI,EAAE,OAAO,MAEzB,OAAOF,EAAQE,CAAI,EAErBH,EAAiBE,EAAA,GAAKD,EAAS,CACjC,EAEaG,EAAuBC,GAAuB,CACzD,MAAMC,EAAeD,EAAmB,OAAQE,GAAQA,EAAI,WAAa,EAAI,EAC7E,OAAOD,EAAa,OAAS,EACzBA,EAAa,IAAKE,IAAW,CAC7B,UAAW,GACX,kBAAmBA,EAAM,GAC/B,EAAM,EACA,CAAC,CAAE,UAAW,GAAI,kBAAmB,EAAE,CAAE,CAC/C,EAEaC,EAAqBC,GAW5B,GAViBA,GAAA,MAAAA,EAAc,UAC/BA,EAAa,UAAU,OACtBC,GACC,CAACA,EAAY,WACb,CAACA,EAAY,mBACZA,EAAY,YAAc,UAAY,CAACA,EAAY,aACnDA,EAAY,oBAAsB,kBACjC,CAACA,EAAY,cAClB,EACC,CAAE,GACW,OAAS,GAMfC,EAAyB,CACpCC,EACAC,EACAC,EACAC,EACAC,EACAC,IACG,CACH,GAAI,CAACL,EAAQ,UAAW,CAACA,EAAQ,SAAW,CAACA,EAAQ,WAAY,CAC/DE,EAAS,CACP,SAAWF,EAAQ,SAEf,GADAlB,EAAG,0BAA2B,kBAAkB,EAEpD,QAAUkB,EAAQ,QAEd,GADAlB,EAAG,yBAA0B,kBAAkB,EAEnD,WAAakB,EAAQ,WAEjB,GADAlB,EAAG,4BAA6B,kBAAkB,CAE5D,CAAK,EACD,MACD,CAEDoB,EAAS,CAAA,CAAE,EACXG,EAAWC,EAAAjB,EAAA,GAAKe,GAAL,CAAc,KAAM,EAAI,EAAE,EAErC,MAAMG,EAAgB,CACpB,SAAUP,EAAQ,SAClB,QAASA,EAAQ,QACjB,WAAYA,EAAQ,UACrB,EAEDjB,EAAUwB,EAAe,yBAAyB,EAAE,KAAMC,GAAW,CACnE,GAAIA,GAAUA,EAAO,QAAS,CAC5BL,EAAgB,EAAI,EACpBE,EAAWC,EAAAjB,EAAA,GAAKe,GAAL,CAAc,KAAM,EAAK,EAAE,EACtCK,EAAM,QAAQ3B,EAAG,0BAA2B,kBAAkB,CAAC,EAC/D,MACD,CACDuB,EAAWC,EAAAjB,EAAA,GAAKe,GAAL,CAAc,KAAM,EAAK,EAAE,EACtCK,EAAM,MACJ3B,EAAG,+DAAgE,kBAAkB,CACtF,CACL,CAAG,CACH"}