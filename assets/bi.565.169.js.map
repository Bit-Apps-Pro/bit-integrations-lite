{"version":3,"file":"bi.565.169.js","sources":["../frontend-dev/src/components/AllIntegrations/CustomAction/EditCustomAction.jsx"],"sourcesContent":["/* eslint-disable no-param-reassign */\nimport { useEffect, useState } from 'react'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport { useRecoilState, useRecoilValue } from 'recoil'\nimport { $actionConf, $formFields, $newFlow } from '../../../GlobalStates'\nimport { __ } from '../../../Utils/i18nwrap'\nimport SnackMsg from '../../Utilities/SnackMsg'\nimport EditFormInteg from '../EditFormInteg'\nimport EditWebhookInteg from '../EditWebhookInteg'\nimport { checkWebhookIntegrationsExist, saveActionConf } from '../IntegrationHelpers/IntegrationHelpers'\nimport CustomActionStepTwo from './CustomActionStepTwo'\nimport CustomFuncEditor from './CustomFuncEditor'\nimport { checkFunctionValidity } from './CustomFunctionHelper'\n\nfunction EditCustomAction({ allIntegURL }) {\n  const navigate = useNavigate()\n  const { formID } = useParams()\n\n  const [customActionConf, setCustomActionConf] = useRecoilState($actionConf)\n  const [flow, setFlow] = useRecoilState($newFlow)\n  const formFields = useRecoilValue($formFields)\n  const [isLoading, setIsLoading] = useState(false)\n  const [snack, setSnackbar] = useState({ show: false })\n  const [step, setStep] = useState(1)\n\n  const handleChange = (e) => {\n    const newConf = { ...customActionConf }\n    if (e !== '') {\n      newConf.value = e\n    }\n    setCustomActionConf({ ...newConf })\n  }\n\n  useEffect(() => {\n    const newConf = { ...customActionConf }\n    delete newConf.isValid\n    setCustomActionConf({ ...newConf })\n  }, [customActionConf?.value])\n\n  return (\n    <div>\n      <SnackMsg snack={snack} setSnackbar={setSnackbar} />\n      {!checkWebhookIntegrationsExist(flow.triggered_entity) && <EditFormInteg setSnackbar={setSnackbar} />}\n      {checkWebhookIntegrationsExist(flow.triggered_entity) && <EditWebhookInteg setSnackbar={setSnackbar} />}\n      <div className=\"mt-3\">\n        <div className=\"btcd-stp-page\" style={{ ...(step === 1 && { width: '91%', height: 'auto', overflow: 'visible' }) }}>\n          <h1>custom action</h1>\n          <CustomFuncEditor\n            customActionConf={customActionConf}\n            setCustomActionConf={setCustomActionConf}\n            formFields={formFields}\n          />\n          <button\n            onClick={() => checkFunctionValidity(customActionConf, setCustomActionConf, setIsLoading)}\n            disabled={!customActionConf.value}\n            className=\"btn f-left btcd-btn-lg green sh-sm flx mt-5\"\n            type=\"button\"\n          >\n            {__('Validated ', 'bit-integrations')}\n          </button>\n        </div>\n      </div>\n\n      <CustomActionStepTwo\n        edit\n        saveConfig={() => saveActionConf({ flow, setFlow, allIntegURL, conf: customActionConf, navigate, edit: 1, setIsLoading, setSnackbar })}\n        isLoading={isLoading}\n        disabled={!customActionConf.isValid}\n      />\n      <br />\n    </div>\n  )\n}\n\nexport default EditCustomAction\n"],"names":["useNavigate","useParams","Recoil_index_20","Recoil_index_18","reactExports","jsxRuntimeExports","$actionConf","$newFlow","$formFields","SnackMsg","__","EditFormInteg","EditWebhookInteg","checkWebhookIntegrationsExist","saveActionConf","checkFunctionValidity","CustomActionStepTwo","CustomFuncEditor","EditCustomAction","allIntegURL","navigate","customActionConf","setCustomActionConf","useRecoilState","flow","setFlow","formFields","useRecoilValue","isLoading","setIsLoading","useState","snack","setSnackbar","step","setStep","useEffect","newConf","__spreadValues","jsx"],"mappings":"yVAcA,OAAA,KAAAA,EAAA,KAAAC,EAAA,KAAAC,EAAA,KAAAC,EAAA,KAAAC,EAAA,KAAAC,MAAA,gBAAA,OAAA,KAAAC,EAAA,KAAAC,EAAA,KAAAC,EAAA,KAAAC,EAAA,KAAAC,MAAA,iBAAA,OAAA,KAAAC,EAAA,KAAAC,MAAA,kBAAA,OAAA,KAAAC,EAAA,KAAAC,MAAA,kBAAA,OAAA,KAAAC,EAAA,KAAAC,MAAA,kBAAA,OAAAC,MAAA,iBAAA,SAASC,EAAiB,CAAE,YAAAC,GAAe,CACzC,MAAMC,EAAWpB,IACEC,EAAU,EAE7B,KAAM,CAACoB,EAAkBC,CAAmB,EAAIC,EAAejB,CAAW,EACpE,CAACkB,EAAMC,CAAO,EAAIF,EAAehB,CAAQ,EACzCmB,EAAaC,EAAenB,CAAW,EACvC,CAACoB,EAAWC,CAAY,EAAIC,WAAS,EAAK,EAC1C,CAACC,EAAOC,CAAW,EAAIF,WAAS,CAAE,KAAM,GAAO,EAC/C,CAACG,EAAMC,CAAO,EAAIJ,WAAS,CAAC,EAUlCK,OAAAA,EAAAA,UAAU,IAAM,CACR,MAAAC,EAAUC,EAAA,GAAKhB,GACrB,OAAOe,EAAQ,QACKd,EAAAe,EAAA,GAAKD,EAAS,CAAA,EACjC,CAACf,GAAA,YAAAA,EAAkB,KAAK,CAAC,SAGzB,MACC,CAAA,SAAA,CAACiB,EAAAA,IAAA7B,EAAA,CAAS,MAAAsB,EAAc,YAAAC,CAA0B,CAAA,EACjD,CAACnB,EAA8BW,EAAK,gBAAgB,GAAKc,EAAAA,IAAC3B,GAAc,YAAAqB,EAA0B,EAClGnB,EAA8BW,EAAK,gBAAgB,GAAKc,EAAA,IAAC1B,GAAiB,YAAAoB,EAA0B,EACrGM,EAAAA,IAAC,OAAI,UAAU,OACb,gBAAC,MAAI,CAAA,UAAU,gBAAgB,MAAOD,EAAA,GAAMJ,IAAS,GAAK,CAAE,MAAO,MAAO,OAAQ,OAAQ,SAAU,YAClG,SAAA,CAAAK,EAAAA,IAAC,MAAG,SAAa,eAAA,CAAA,EACjBA,EAAA,IAACrB,EAAA,CACC,iBAAAI,EACA,oBAAAC,EACA,WAAAI,CAAA,CACF,EACAY,EAAA,IAAC,SAAA,CACC,QAAS,IAAMvB,EAAsBM,EAAkBC,EAAqBO,CAAY,EACxF,SAAU,CAACR,EAAiB,MAC5B,UAAU,8CACV,KAAK,SAEJ,SAAAX,EAAG,aAAc,kBAAkB,CAAA,CACtC,CAAA,CAAA,CACF,CACF,CAAA,EAEA4B,EAAA,IAACtB,EAAA,CACC,KAAI,GACJ,WAAY,IAAMF,EAAe,CAAE,KAAAU,EAAM,QAAAC,EAAS,YAAAN,EAAa,KAAME,EAAkB,SAAAD,EAAU,KAAM,EAAG,aAAAS,EAAc,YAAAG,EAAa,EACrI,UAAAJ,EACA,SAAU,CAACP,EAAiB,OAAA,CAC9B,QACC,KAAG,EAAA,CACN,CAAA,CAAA,CAEJ"}