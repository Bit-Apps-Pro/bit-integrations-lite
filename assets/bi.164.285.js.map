{"version":3,"file":"bi.164.285.js","sources":["../frontend-dev/src/components/AllIntegrations/Notion/NotionAuthorization.jsx"],"sourcesContent":["import { useState } from 'react'\nimport { useRecoilValue } from 'recoil'\nimport { $btcbi } from '../../../GlobalStates'\nimport AuthorizeButton from '../../Utilities/AuthorizeButton'\nimport ErrorField from '../../Utilities/ErrorField'\nimport GetInfo from '../../Utilities/GetInfo'\nimport Input from '../../Utilities/Input'\nimport Note from '../../Utilities/Note'\nimport StepPage from '../../Utilities/StepPage'\nimport { getAllDatabaseLists, handleAuthorize, handleInput } from './NotionCommonFunc'\nimport tutorialLinks from '../../../Utils/StaticData/tutorialLinks'\nimport TutorialLink from '../../Utilities/TutorialLink'\n\nfunction NotionAuthorization({ notionConf, setNotionConf, step, setStep, isInfo, loading, setLoading }) {\n  const btcbi = useRecoilValue($btcbi)\n  const [authorized, setAuthorized] = useState(false)\n  const [error, setError] = useState({ clientId: '', clientSecret: '' })\n  const { notion } = tutorialLinks\n  const nextPage = async () => {\n    setTimeout(() => {\n      document.getElementById('btcd-settings-wrp').scrollTop = 0\n    }, 300)\n\n    setStep(2)\n    setLoading({ ...loading, page: true })\n    const data = await getAllDatabaseLists(notionConf, setNotionConf)\n    if (data) {\n      setLoading({ ...loading, page: false })\n    }\n  }\n\n  const note = `\n  <h4> Step of get Client Id & Client Secret</h4>\n  <ul>\n    <li>Goto <a href=\"https://www.notion.so/my-integrations\" target='_blank'>My integrations.</a></li>\n    <li>Click new integration.</li>\n    <li>Name to identify your integration to users.</li>\n    <li><b>User Capabilities</b> always select read user information including email addresses</li>\n    <li><b>Submit</b></li>\n    <li>Select <b>Integration type</b> Public</li>\n    <li>Fill up <b>OAuth Domain & URIs</b> information</li>\n    <li>Homepage & Redirect URIs copy from Integration Settings</li>\n    <li>Finally, click <b>Authorize</b> button.</li>\n</ul>\n`\n  return (\n    <StepPage\n      step={step}\n      stepNo={1}\n      style={{ width: 900, height: 'auto' }}\n    >\n      {notion?.youTubeLink && (\n        <TutorialLink\n          title={notion?.title}\n          youTubeLink={notion?.youTubeLink}\n        />\n      )}\n      {notion?.docLink && (\n        <TutorialLink\n          title={notion?.title}\n          docLink={notion?.docLink}\n        />\n      )}\n\n      <div className=\"mt-2\">\n\n        {/* Notion Authorization */}\n\n        <Input\n          label=\"Integration Name\"\n          name=\"name\"\n          placeholder=\"Integration Name...\"\n          value={notionConf.name}\n          onchange={(e) => handleInput(e, notionConf, setNotionConf, error, setError)}\n        />\n        <Input\n          label=\"Homepage\"\n          copytext={window.location.origin}\n          setToast\n        />\n        <Input\n          label=\"Redirect URIs\"\n          copytext={`${btcbi.api.base}/redirect`}\n          setToast\n        />\n        <Input\n          label=\"OAuth client ID\"\n          name=\"clientId\"\n          placeholder=\"client ID...\"\n          value={notionConf.clientId}\n          onchange={(e) => handleInput(e, notionConf, setNotionConf, error, setError)}\n        />\n        <ErrorField error={error.clientId} />\n        <Input\n          label=\"OAuth client secret\"\n          name=\"clientSecret\"\n          placeholder=\"client secret...\"\n          value={notionConf.clientSecret}\n          onchange={(e) => handleInput(e, notionConf, setNotionConf, error, setError)}\n\n        />\n        <ErrorField error={error.clientSecret} />\n        <GetInfo\n          url=\"https://www.notion.so/my-integrations\"\n          info=\"Notion My integrations, please visit\"\n        />\n        {!isInfo && (\n          <AuthorizeButton\n            onclick={() => handleAuthorize(notionConf, setNotionConf, error, setError, setAuthorized, loading, setLoading)}\n            nextPage={nextPage}\n            auth={authorized}\n            loading={loading.auth}\n          />\n        )}\n      </div>\n\n      <Note note={note} />\n    </StepPage>\n\n  )\n}\n\nexport default NotionAuthorization\n"],"names":["Recoil_index_18","reactExports","jsxRuntimeExports","$btcbi","Note","Step","Input","ErrorField","GetInfo","AuthorizeButton","handleInput","handleAuthorize","getAllDatabaseLists","TutorialLink","tutorialLinks","NotionAuthorization","notionConf","setNotionConf","step","setStep","isInfo","loading","setLoading","btcbi","useRecoilValue","authorized","setAuthorized","useState","error","setError","notion","nextPage","__async","__spreadProps","__spreadValues","note","jsxs","StepPage","jsx","e"],"mappings":"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"}