{"version":3,"file":"bi.166.838.js","sources":["../frontend-dev/src/components/AllIntegrations/Smaily/SmailyActions.jsx","../frontend-dev/src/components/AllIntegrations/Smaily/IntegrationHelpers.jsx","../frontend-dev/src/components/AllIntegrations/Smaily/CustomField.jsx","../frontend-dev/src/components/AllIntegrations/Smaily/SmailyFieldMap.jsx","../frontend-dev/src/components/AllIntegrations/Smaily/SmailyIntegLayout.jsx"],"sourcesContent":["/* eslint-disable no-param-reassign */\n\nimport { __ } from '../../../Utils/i18nwrap'\nimport TableCheckBox from '../../Utilities/TableCheckBox'\nimport 'react-multiple-select-dropdown-lite/dist/index.css'\n\nexport default function SmailyActions({ smailyConf, setSmailyConf }) {\n  const actionHandler = (e, type) => {\n    const newConf = { ...smailyConf }\n    if (type === 'unsubscribe') {\n      if (e.target.checked) {\n        newConf.actions.unsubscribe = true\n      } else {\n        delete newConf.actions.unsubscribe\n      }\n    }\n    setSmailyConf({ ...newConf })\n  }\n\n  return (\n    <div className=\"pos-rel d-flx w-8\">\n      <TableCheckBox checked={smailyConf.actions?.unsubscribe || false} onChange={(e) => actionHandler(e, 'unsubscribe')} className=\"wdt-200 mt-4 mr-2\" value=\"update_subscriber\" title={__('unsubscribe subscriber', 'bit-integrations')} subTitle={__('Set the subscriber\\'s status as unsubscribed.', 'bit-integrations')} />\n    </div>\n  )\n}\n","/* eslint-disable no-unused-expressions */\n\nexport const addFieldMap = (i, confTmp, setConf) => {\n  const newConf = { ...confTmp }\n  newConf.field_map.splice(i, 0, {})\n  setConf({ ...newConf })\n}\n\nexport const delFieldMap = (i, confTmp, setConf) => {\n  const newConf = { ...confTmp }\n  if (newConf.field_map.length > 1) {\n    newConf.field_map.splice(i, 1)\n  }\n\n  setConf({ ...newConf })\n}\n\nexport const handleFieldMapping = (event, index, conftTmp, setConf) => {\n  const newConf = { ...conftTmp }\n  newConf.field_map[index][event.target.name] = event.target.value\n\n  if (event.target.value === 'custom') {\n    newConf.field_map[index].customValue = ''\n  }\n\n  if (event.target.value === 'customFieldKey') {\n    newConf.field_map[index].customFieldKey = ''\n  }\n  setConf({ ...newConf })\n}\n\nexport const handleCustomField = (event, index, conftTmp, setConf, fieldValue) => {\n  const newConf = { ...conftTmp }\n  newConf.field_map[index][fieldValue] = event.target.value\n  setConf({ ...newConf })\n}\n","import { __ } from '../../../Utils/i18nwrap'\nimport MtInput from '../../Utilities/MtInput'\nimport { handleCustomField } from './IntegrationHelpers'\n\nexport default function CustomField({ field, index, smailyConf, setSmailyConf, fieldValue, fieldLabel, className }) {\n  return (\n    <MtInput\n      onChange={e => handleCustomField(e, index, smailyConf, setSmailyConf, fieldValue)}\n      label={__(fieldLabel, 'bit-integrations')}\n      className={className}\n      type=\"text\"\n      value={field[fieldValue]}\n      placeholder={__(fieldLabel, 'bit-integrations')}\n    />\n  )\n}\n","/* eslint-disable no-console */\nimport { useRecoilValue } from 'recoil'\nimport { __ } from '../../../Utils/i18nwrap'\nimport { addFieldMap, delFieldMap, handleFieldMapping } from './IntegrationHelpers'\nimport { SmartTagField } from '../../../Utils/StaticData/SmartTagField'\nimport { $btcbi } from '../../../GlobalStates'\nimport { generateMappedField } from './SmailyCommonFunc'\nimport CustomField from './CustomField'\n\nexport default function SmailyFieldMap({ i, formFields, field, smailyConf, setSmailyConf }) {\n  const requiredFields = smailyConf?.staticFields.filter(fld => fld.required === true) || []\n  const nonRequiredFields = smailyConf?.staticFields.filter(fld => fld.required === false) || []\n\n  if (smailyConf?.field_map?.length === 1 && field.smailyFormField === '') {\n    const newConf = { ...smailyConf }\n    const tmp = generateMappedField(newConf)\n    newConf.field_map = tmp\n    setSmailyConf(newConf)\n  }\n\n  const btcbi = useRecoilValue($btcbi)\n  const { isPro } = btcbi\n\n  return (\n    <div className=\"flx mt-2 mb-2 btcbi-field-map\">\n      <div className=\"pos-rel flx\">\n        <div className=\"flx integ-fld-wrp\">\n          <select className=\"btcd-paper-inp mr-2\" name=\"formField\" value={field.formField || ''} onChange={(ev) => handleFieldMapping(ev, i, smailyConf, setSmailyConf)}>\n            <option value=\"\">{__('Select Field', 'bit-integrations')}</option>\n            <optgroup label=\"Form Fields\">\n              {\n                formFields?.map(f => (\n                  <option key={`ff-rm-${f.name}`} value={f.name}>\n                    {f.label}\n                  </option>\n                ))\n              }\n            </optgroup>\n            <option value=\"custom\">{__('Custom...', 'bit-integrations')}</option>\n            <optgroup label={`General Smart Codes ${isPro ? '' : '(PRO)'}`}>\n              {isPro && SmartTagField?.map(f => (\n                <option key={`ff-rm-${f.name}`} value={f.name}>\n                  {f.label}\n                </option>\n              ))}\n            </optgroup>\n          </select>\n          {field.formField === 'custom' && (\n            <CustomField\n              field={field}\n              index={i}\n              smailyConf={smailyConf}\n              setSmailyConf={setSmailyConf}\n              fieldValue=\"customValue\"\n              fieldLabel=\"Custom Value\"\n              className=\"mr-2\"\n            />\n          )}\n          <select className=\"btcd-paper-inp\" disabled={i < requiredFields.length} name=\"smailyFormField\" value={i < requiredFields ? (requiredFields[i].label || '') : (field.smailyFormField || '')} onChange={(ev) => handleFieldMapping(ev, i, smailyConf, setSmailyConf)}>\n            <option value=\"\">{__('Select Field', 'bit-integrations')}</option>\n            {\n              i < requiredFields.length ? (\n                <option key={requiredFields[i].key} value={requiredFields[i].key}>\n                  {requiredFields[i].label}\n                </option>\n              ) : (\n                nonRequiredFields.map(({ key, label }) => (\n                  <option key={key} value={key}>\n                    {label}\n                  </option>\n                ))\n              )\n            }\n            <option value=\"customFieldKey\">{__('Custom Field', 'bit-integrations')}</option>\n          </select>\n          {field.smailyFormField === 'customFieldKey' && (\n            <CustomField\n              field={field}\n              index={i}\n              smailyConf={smailyConf}\n              setSmailyConf={setSmailyConf}\n              fieldValue=\"customFieldKey\"\n              fieldLabel=\"Custom Field Key\"\n              className=\"ml-2\"\n            />\n          )}\n        </div>\n        {\n          i >= requiredFields.length && (\n            <>\n              <button\n                onClick={() => addFieldMap(i, smailyConf, setSmailyConf)}\n                className=\"icn-btn sh-sm ml-2 mr-1\"\n                type=\"button\"\n              >\n                +\n              </button>\n              <button onClick={() => delFieldMap(i, smailyConf, setSmailyConf)} className=\"icn-btn sh-sm ml-1\" type=\"button\" aria-label=\"btn\">\n                <span className=\"btcd-icn icn-trash-2\" />\n              </button>\n            </>\n          )\n        }\n      </div>\n    </div>\n  )\n}\n","/* eslint-disable no-unused-vars */\nimport { useState } from 'react'\nimport { __ } from '../../../Utils/i18nwrap'\nimport SmailyActions from './SmailyActions'\nimport SmailyFieldMap from './SmailyFieldMap'\nimport { addFieldMap } from './IntegrationHelpers'\n\nexport default function SmailyIntegLayout({ formFields, handleInput, smailyConf, setSmailyConf, loading, setLoading, setSnackbar }) {\n  const [error, setError] = useState({ name: '', api_user_name: '' })\n  const [isAuthorized, setIsAuthorized] = useState(false)\n\n  return (\n    <>\n      <br />\n      <div>\n        <br />\n        <div className=\"mt-5\">\n          <b className=\"wdt-100\">\n            {__('Field Map', 'bit-integrations')}\n          </b>\n        </div>\n        <br />\n        <div className=\"btcd-hr mt-1\" />\n        <div className=\"flx flx-around mt-2 mb-2 btcbi-field-map-label\">\n          <div className=\"txt-dp\"><b>{__('Form Fields', 'bit-integrations')}</b></div>\n          <div className=\"txt-dp\"><b>{__('Smaily Fields', 'bit-integrations')}</b></div>\n\n        </div>\n\n        {smailyConf?.field_map.map((itm, i) => (\n          <SmailyFieldMap\n            key={`rp-m-${i + 9}`}\n            i={i}\n            field={itm}\n            smailyConf={smailyConf}\n            formFields={formFields}\n            setSmailyConf={setSmailyConf}\n            setSnackbar={setSnackbar}\n          />\n        ))}\n        <div className=\"txt-center btcbi-field-map-button mt-2\"><button onClick={() => addFieldMap(smailyConf.field_map.length, smailyConf, setSmailyConf, false)} className=\"icn-btn sh-sm\" type=\"button\">+</button></div>\n        <br />\n        <br />\n        <div className=\"mt-4\"><b className=\"wdt-100\">{__('Actions', 'bit-integrations')}</b></div>\n        <div className=\"btcd-hr mt-1\" />\n        <SmailyActions\n          smailyConf={smailyConf}\n          setSmailyConf={setSmailyConf}\n          formFields={formFields}\n        />\n      </div>\n    </>\n  )\n}\n"],"names":["jsxRuntimeExports","Recoil_index_18","reactExports","TableCheckBox","__","$btcbi","SmartTagField","generateMappedField","MtInput","SmailyActions","smailyConf","setSmailyConf","_a","actionHandler","e","type","newConf","__spreadValues","jsx","addFieldMap","i","confTmp","setConf","delFieldMap","handleFieldMapping","event","index","conftTmp","handleCustomField","fieldValue","CustomField","field","fieldLabel","className","SmailyFieldMap","formFields","_b","requiredFields","fld","nonRequiredFields","tmp","btcbi","useRecoilValue","isPro","jsxs","ev","f","key","label","Fragment","SmailyIntegLayout","handleInput","loading","setLoading","setSnackbar","useState","itm"],"mappings":"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"}