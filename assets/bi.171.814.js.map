{"version":3,"file":"bi.171.814.js","sources":["../frontend-dev/src/components/AllIntegrations/Moosend/MoosendFieldMap.jsx","../frontend-dev/src/components/AllIntegrations/Moosend/MoosendIntegLayout.jsx"],"sourcesContent":["import { useRecoilValue } from 'recoil'\nimport { $btcbi } from '../../../GlobalStates'\nimport { __ } from '../../../Utils/i18nwrap'\nimport { SmartTagField } from '../../../Utils/StaticData/SmartTagField'\nimport MtInput from '../../Utilities/MtInput'\nimport TagifyInput from '../../Utilities/TagifyInput'\nimport { addFieldMap, delFieldMap, handleFieldMapping } from '../GlobalIntegrationHelper'\nimport { handleCustomValue } from '../IntegrationHelpers/IntegrationHelpers'\n\nfunction MoosendFieldMap({ i, field, formFields, moosendConf, setMoosendConf }) {\n  const btcbi = useRecoilValue($btcbi)\n  const { isPro } = btcbi\n\n  const requiredFields = moosendConf?.moosendFields.filter(fld => fld.required === true) || []\n\n  const nonrequiredFields = moosendConf?.moosendFields.filter(fld => fld.required === false) || []\n\n  return (\n    <div\n      className=\"flx mt-2 mb-2 btcbi-field-map\"\n    >\n      <div className=\"pos-rel flx\">\n        <div className=\"flx integ-fld-wrp\">\n          <select\n            className=\"btcd-paper-inp mr-2\"\n            name=\"formFields\"\n            onChange={(event) => {\n              handleFieldMapping(event, i, moosendConf, setMoosendConf)\n            }}\n            value={field.formFields || ''}\n          >\n            <option value=\"\">{__('Select Field')}</option>\n            <optgroup label=\"Form Fields\">\n              {\n                formFields?.map(f => (\n                  <option key={`ff-rm-${f.name}`} value={f.name}>\n                    {f.label}\n                  </option>\n                ))\n              }\n            </optgroup>\n            <option value=\"custom\">{__('Custom...')}</option>\n            <optgroup label={`General Smart Codes ${isPro ? '' : '(PRO)'}`}>\n              {isPro && SmartTagField?.map(f => (\n                <option key={`ff-rm-${f.name}`} value={f.name}>\n                  {f.label}\n                </option>\n              ))}\n            </optgroup>\n\n          </select>\n\n          {/* When user select custom field */}\n\n          {field.formField === 'custom' && <TagifyInput onChange={e => handleCustomValue(e, i, moosendConf, setMoosendConf)} label={__('Custom Value', 'bit-integrations')} className=\"mr-2\" type=\"text\" value={field.customValue} placeholder={__('Custom Value', 'bit-integrations')} formFields={formFields} />}\n\n          <select\n            className=\"btcd-paper-inp\"\n            disabled={i < requiredFields.length}\n            name=\"moosendFormFields\"\n            onChange={(event) => {\n              handleFieldMapping(event, i, moosendConf, setMoosendConf)\n            }}\n            value={i < requiredFields.length ? (requiredFields[i].key || '') : (field.moosendFormFields || '')}\n          >\n            <option value=\"\">{__('Select Field')}</option>\n            {\n              i < requiredFields.length ? (\n                <option key={requiredFields[i].key} value={requiredFields[i].key}>\n                  {requiredFields[i].label}\n                </option>\n              ) : (\n                nonrequiredFields.map(({ key, label }) => (\n                  <option key={key} value={key}>\n                    {label}\n                  </option>\n                ))\n              )\n            }\n          </select>\n        </div>\n\n        {moosendConf?.method === '1' && (\n          <>\n            <button\n              onClick={() => addFieldMap(i, moosendConf, setMoosendConf)}\n              className=\"icn-btn sh-sm ml-2 mr-1\"\n              type=\"button\"\n            >\n              +\n            </button>\n            <button onClick={() => delFieldMap(i, moosendConf, setMoosendConf)} className=\"icn-btn sh-sm ml-1\" type=\"button\" aria-label=\"btn\">\n              <span className=\"btcd-icn icn-trash-2\" />\n            </button>\n\n          </>\n        )}\n\n      </div>\n    </div>\n  )\n}\n\nexport default MoosendFieldMap\n","/* eslint-disable no-case-declarations */\n/* eslint-disable default-case */\n/* eslint-disable no-console */\nimport { __ } from '../../../Utils/i18nwrap'\nimport Loader from '../../Loaders/Loader'\nimport LoaderSm from '../../Loaders/LoaderSm'\nimport { addFieldMap } from '../GlobalIntegrationHelper'\nimport { generateMappedField, getAllLists } from './MoosendCommonFunc'\nimport MoosendFieldMap from './MoosendFieldMap'\n\nfunction MoosendIntegLayout({ moosendConf, setMoosendConf, formFields, loading, setLoading }) {\n  const moosendMethod = [\n    { key: '1', name: 'Subscribe' },\n    { key: '0', name: 'Unsubscribe' },\n    { key: '2', name: 'Unsubscribe from list' },\n  ]\n  const handleList = (e) => {\n    let tmp\n    const newConf = { ...moosendConf }\n    const { name, value } = e.target\n    if (value !== '') {\n      newConf[name] = value\n    } else {\n      delete newConf[name]\n    }\n    switch (name) {\n      case 'listId':\n        newConf.field_map = [{ formFields: '', moosendFormFields: '' }]\n        tmp = generateMappedField(newConf)\n        newConf.field_map = tmp\n        break\n      case 'method':\n        newConf.listId = ''\n        newConf.field_map = [{ formFields: '', moosendFormFields: '' }]\n        // if (moosendConf?.field_map?.length === 1 && moosendConf.field_map[0].moosendFormFields === '') {\n        tmp = generateMappedField(newConf)\n        newConf.field_map = tmp\n        // }\n        break\n    }\n    setMoosendConf({ ...newConf })\n  }\n\n  return (\n    <div className=\"mt-2\">\n\n      {!loading.page && (\n\n        <div className=\"flx mt-2\">\n          <b className=\"wdt-200 d-in-b \">{__('Method:')}</b>\n          <select onChange={handleList} name=\"method\" value={moosendConf?.method} className=\"btcd-paper-inp w-5 mx-0\">\n            <option value=\"\">{__('Select Method')}</option>\n            {\n              moosendMethod.map(method => (\n                <option key={method.key} value={method.key}>\n                  {method.name}\n                </option>\n              ))\n\n            }\n          </select>\n        </div>\n      )}\n      {(moosendConf.method && moosendConf.method !== '0') && (\n        <div className=\"flx mt-2\">\n          <b className=\"wdt-200 d-in-b \">{__('List:')}</b>\n          <select onChange={handleList} name=\"listId\" value={moosendConf?.listId} className=\"btcd-paper-inp w-5 mx-0\">\n            <option value=\"\">{__('Select List')}</option>\n            {\n              moosendConf?.default?.lists && moosendConf.default.lists.map(list => (\n                <option key={list.ID} value={list.ID}>\n                  {list.Name}\n                </option>\n              ))\n\n            }\n          </select>\n          <button onClick={() => getAllLists(moosendConf, setMoosendConf, loading, setLoading)} className=\"icn-btn sh-sm ml-2 mr-2 tooltip\" style={{ '--tooltip-txt': '\"Refresh list\"' }} type=\"button\" disabled={loading.list}>&#x21BB;</button>\n          {loading.list && <LoaderSm size=\"20\" clr=\"#022217\" className=\"ml-2\" />}\n        </div>\n      )}\n\n      { moosendConf?.method && (\n        <div className=\"mt-5\">\n          <b className=\"wdt-100\">\n            {__('Field Map')}\n          </b>\n\n          <div className=\"btcd-hr mt-2 mb-4\" />\n          <div className=\"flx flx-around mt-2 mb-2 btcbi-field-map-label\">\n            <div className=\"txt-dp\"><b>{__('Form Fields')}</b></div>\n            <div className=\"txt-dp\"><b>{__('Moosend Fields')}</b></div>\n          </div>\n          {moosendConf?.field_map.map((itm, i) => (\n            <MoosendFieldMap\n              key={`ko-m-${i + 8}`}\n              i={i}\n              field={itm}\n              formFields={formFields}\n              moosendConf={moosendConf}\n              setMoosendConf={setMoosendConf}\n            />\n          ))}\n          {moosendConf?.method === '1' && (\n            <div className=\"txt-center btcbi-field-map-button mt-2\"><button onClick={() => addFieldMap(moosendConf.field_map.length, moosendConf, setMoosendConf, false)} className=\"icn-btn sh-sm\" type=\"button\">+</button></div>\n          )}\n\n        </div>\n      )}\n\n      {/* --- PAGE Loader --- */}\n\n      {loading.page && (\n        <Loader style={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: 100,\n          transform: 'scale(0.7)',\n        }}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default MoosendIntegLayout\n"],"names":["Recoil_index_18","jsxRuntimeExports","$btcbi","__","LoaderSm","handleFieldMapping","addFieldMap","delFieldMap","getAllLists","generateMappedField","SmartTagField","TagifyInput","handleCustomValue","MoosendFieldMap","i","field","formFields","moosendConf","setMoosendConf","_a","btcbi","useRecoilValue","isPro","requiredFields","fld","nonrequiredFields","jsx","jsxs","event","f","e","key","label","Fragment","MoosendIntegLayout","loading","setLoading","moosendMethod","handleList","tmp","newConf","__spreadValues","name","value","method","list","itm","Loader"],"mappings":"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"}