{"version":3,"file":"bi.813.404.js","sources":["../frontend-dev/src/components/AllIntegrations/Klaviyo/Klaviyo.jsx"],"sourcesContent":["import { useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { __ } from '../../../Utils/i18nwrap'\nimport Steps from '../../Utilities/Steps'\nimport IntegrationStepThree from '../IntegrationHelpers/IntegrationStepThree'\nimport KlaviyoAuthorization from './KlaviyoAuthorization'\nimport { nextPage, saveConfig } from './KlaviyoCommonFunc'\nimport KlaviyoIntegLayout from './KlaviyoIntegLayout'\n\nfunction Klaviyo({ formFields, setFlow, flow, allIntegURL }) {\n  const navigate = useNavigate()\n  const [isLoading, setIsLoading] = useState(false)\n  const [loading, setLoading] = useState({\n    list: false,\n    field: false,\n    auth: false,\n  })\n  const [step, setStep] = useState(1)\n  const [klaviyoConf, setKlaviyoConf] = useState({\n    name: 'Klaviyo',\n    type: 'Klaviyo',\n    authKey: process.env.NODE_ENV === 'development' ? 'pk_d8b5b0537a0358d781f72a474efab0f36e' : '',\n    field_map: [\n      { formField: '', klaviyoFormField: '' },\n    ],\n    klaviyoFields: [\n      { key: 'email', label: 'Email', required: true },\n      { key: 'first_name', label: 'First Name', required: false },\n      { key: 'last_name', label: 'Last Name', required: false },\n      { key: 'title', label: 'Title', required: false },\n      { key: 'organization', label: 'Organization', required: false },\n      { key: 'phone_number', label: 'Phone Number', required: false },\n    ],\n    listId: '',\n    actions: {},\n  })\n  return (\n    <div>\n      <div className=\"txt-center mt-2\"><Steps step={3} active={step} /></div>\n\n      {/* --- STEP 1 --- */}\n\n      <KlaviyoAuthorization\n        klaviyoConf={klaviyoConf}\n        setKlaviyoConf={setKlaviyoConf}\n        loading={loading}\n        setLoading={setLoading}\n        step={step}\n        setStep={setStep}\n      />\n\n      {/* --- STEP 2 --- */}\n\n      <div className=\"btcd-stp-page\" style={{ ...(step === 2 && { width: 900, height: 'auto', overflow: 'visible' }) }}>\n\n        <KlaviyoIntegLayout\n          formFields={formFields}\n          klaviyoConf={klaviyoConf}\n          setKlaviyoConf={setKlaviyoConf}\n          loading={loading}\n          setLoading={setLoading}\n        />\n\n        <button\n          onClick={() => nextPage(klaviyoConf, setStep, 3)}\n          disabled={!klaviyoConf.listId || klaviyoConf.field_map.length < 1}\n          className=\"btn f-right btcd-btn-lg green sh-sm flx\"\n          type=\"button\"\n        >\n          {__('Next', 'bit-integrations')}\n          &nbsp;\n          <div className=\"btcd-icn icn-arrow_back rev-icn d-in-b\" />\n        </button>\n\n      </div>\n\n      <IntegrationStepThree\n        step={step}\n        saveConfig={() => saveConfig(flow, setFlow, allIntegURL, klaviyoConf, navigate, setIsLoading)}\n        isLoading={isLoading}\n        dataConf={klaviyoConf}\n        setDataConf={setKlaviyoConf}\n        formFields={formFields}\n      />\n    </div>\n\n  )\n}\n\nexport default Klaviyo\n"],"names":["Klaviyo","formFields","setFlow","flow","allIntegURL","navigate","useNavigate","isLoading","setIsLoading","useState","loading","setLoading","step","setStep","klaviyoConf","setKlaviyoConf","jsx","Steps","KlaviyoAuthorization","__spreadValues","KlaviyoIntegLayout","jsxs","nextPage","__","IntegrationStepThree","saveConfig"],"mappings":"2xBASA,SAASA,EAAQ,CAAE,WAAAC,EAAY,QAAAC,EAAS,KAAAC,EAAM,YAAAC,GAAe,CAC3D,MAAMC,EAAWC,IACX,CAACC,EAAWC,CAAY,EAAIC,WAAS,EAAK,EAC1C,CAACC,EAASC,CAAU,EAAIF,WAAS,CACrC,KAAM,GACN,MAAO,GACP,KAAM,EAAA,CACP,EACK,CAACG,EAAMC,CAAO,EAAIJ,WAAS,CAAC,EAC5B,CAACK,EAAaC,CAAc,EAAIN,WAAS,CAC7C,KAAM,UACN,KAAM,UACN,QAA4F,GAC5F,UAAW,CACT,CAAE,UAAW,GAAI,iBAAkB,EAAG,CACxC,EACA,cAAe,CACb,CAAE,IAAK,QAAS,MAAO,QAAS,SAAU,EAAK,EAC/C,CAAE,IAAK,aAAc,MAAO,aAAc,SAAU,EAAM,EAC1D,CAAE,IAAK,YAAa,MAAO,YAAa,SAAU,EAAM,EACxD,CAAE,IAAK,QAAS,MAAO,QAAS,SAAU,EAAM,EAChD,CAAE,IAAK,eAAgB,MAAO,eAAgB,SAAU,EAAM,EAC9D,CAAE,IAAK,eAAgB,MAAO,eAAgB,SAAU,EAAM,CAChE,EACA,OAAQ,GACR,QAAS,CAAC,CAAA,CACX,EACD,cACG,MACC,CAAA,SAAA,CAACO,EAAAA,IAAA,MAAA,CAAI,UAAU,kBAAkB,SAAAA,EAAA,IAACC,GAAM,KAAM,EAAG,OAAQL,CAAA,CAAM,CAAE,CAAA,EAIjEI,EAAA,IAACE,EAAA,CACC,YAAAJ,EACA,eAAAC,EACA,QAAAL,EACA,WAAAC,EACA,KAAAC,EACA,QAAAC,CAAA,CACF,SAIC,MAAI,CAAA,UAAU,gBAAgB,MAAOM,EAAA,GAAMP,IAAS,GAAK,CAAE,MAAO,IAAK,OAAQ,OAAQ,SAAU,SAAA,GAEhG,SAAA,CAAAI,EAAA,IAACI,EAAA,CACC,WAAAnB,EACA,YAAAa,EACA,eAAAC,EACA,QAAAL,EACA,WAAAC,CAAA,CACF,EAEAU,EAAA,KAAC,SAAA,CACC,QAAS,IAAMC,EAASR,EAAaD,EAAS,CAAC,EAC/C,SAAU,CAACC,EAAY,QAAUA,EAAY,UAAU,OAAS,EAChE,UAAU,0CACV,KAAK,SAEJ,SAAA,CAAAS,EAAG,OAAQ,kBAAkB,EAAE,IAEhCP,EAAAA,IAAC,MAAI,CAAA,UAAU,wCAAyC,CAAA,CAAA,CAAA,CAC1D,CAAA,EAEF,EAEAA,EAAA,IAACQ,EAAA,CACC,KAAAZ,EACA,WAAY,IAAMa,EAAWtB,EAAMD,EAASE,EAAaU,EAAaT,EAAUG,CAAY,EAC5F,UAAAD,EACA,SAAUO,EACV,YAAaC,EACb,WAAAd,CAAA,CACF,CACF,CAAA,CAAA,CAGJ"}