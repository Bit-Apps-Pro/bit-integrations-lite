{"version":3,"file":"bi.886.715.js","sources":["../frontend-dev/src/components/AllIntegrations/GoogleSheet/GoogleSheetCommonFunc.js"],"sourcesContent":["import { __, sprintf } from '../../../Utils/i18nwrap'\nimport bitsFetch from '../../../Utils/bitsFetch'\nimport { deepCopy } from '../../../Utils/Helpers'\n\nexport const handleInput = (e, sheetConf, setSheetConf, formID, setIsLoading, setSnackbar, isNew, error, setError) => {\n  let newConf = { ...sheetConf }\n  if (isNew) {\n    const rmError = { ...error }\n    rmError[e.target.name] = ''\n    setError({ ...rmError })\n  }\n  newConf[e.target.name] = e.target.value\n  switch (e.target.name) {\n    case 'spreadsheetId':\n      newConf = spreadSheetChange(newConf, formID, setSheetConf, setIsLoading, setSnackbar)\n      break\n    case 'worksheetName':\n      newConf = worksheetChange(newConf, formID, setSheetConf, setIsLoading, setSnackbar)\n      break\n    default:\n      break\n  }\n  setSheetConf({ ...newConf })\n}\n\nexport const spreadSheetChange = (sheetConf, formID, setSheetConf, setIsLoading, setSnackbar) => {\n  const newConf = deepCopy(sheetConf)\n  newConf.worksheetName = ''\n  newConf.headerRow = 'A1'\n  newConf.field_map = [{ formField: '', googleSheetField: '' }]\n\n  if (!newConf?.default?.worksheets?.[sheetConf.spreadsheetId]) {\n    refreshWorksheets(formID, newConf, setSheetConf, setIsLoading, setSnackbar)\n  } else if (Object.keys(newConf?.default?.worksheets?.[sheetConf.spreadsheetId]).length === 1) {\n    newConf.worksheetName = newConf?.default?.worksheets?.[sheetConf.spreadsheetId][0].properties.title\n\n    if (!newConf?.default?.worksheets?.headers?.[newConf.worksheetName]) {\n      refreshWorksheetHeaders(formID, newConf, setSheetConf, setIsLoading, setSnackbar)\n    }\n  }\n\n  return newConf\n}\n\nexport const worksheetChange = (sheetConf, formID, setSheetConf, setIsLoading, setSnackbar) => {\n  const newConf = { ...sheetConf }\n  newConf.headerRow = 'A1'\n  newConf.field_map = [{ formField: '', googleSheetField: '' }]\n\n  if (!newConf?.default?.worksheets?.headers?.[sheetConf.worksheetName]) {\n    refreshWorksheetHeaders(formID, newConf, setSheetConf, setIsLoading, setSnackbar)\n  }\n\n  return newConf\n}\n\nexport const refreshSpreadsheets = (formID, sheetConf, setSheetConf, setIsLoading, setSnackbar) => {\n  setIsLoading(true)\n  const refreshModulesRequestParams = {\n    formID,\n    id: sheetConf.id,\n    clientId: sheetConf.clientId,\n    clientSecret: sheetConf.clientSecret,\n    tokenDetails: sheetConf.tokenDetails,\n    ownerEmail: sheetConf.ownerEmail,\n  }\n  bitsFetch(refreshModulesRequestParams, 'gsheet_refresh_spreadsheets')\n    .then(result => {\n      if (result && result.success) {\n        const newConf = { ...sheetConf }\n        if (!newConf.default) {\n          newConf.default = {}\n        }\n        if (result.data.spreadsheets) {\n          newConf.default.spreadsheets = result.data.spreadsheets\n        }\n        if (result.data.tokenDetails) {\n          newConf.tokenDetails = result.data.tokenDetails\n        }\n        setSnackbar({ show: true, msg: __('Spreadsheet refreshed', 'bit-integrations') })\n        setSheetConf({ ...newConf })\n      } else if ((result && result.data && result.data.data) || (!result.success && typeof result.data === 'string')) {\n        setSnackbar({ show: true, msg: sprintf(__('Spreadsheet refresh failed Cause: %s. please try again', 'bit-integrations'), result.data.data || result.data) })\n      } else {\n        setSnackbar({ show: true, msg: __('Spreadsheet refresh failed. please try again', 'bit-integrations') })\n      }\n      setIsLoading(false)\n    })\n    .catch(() => setIsLoading(false))\n}\n\nexport const refreshWorksheets = (formID, sheetConf, setSheetConf, setIsLoading, setSnackbar) => {\n  const { spreadsheetId } = sheetConf\n  if (!spreadsheetId) {\n    return\n  }\n  setIsLoading(true)\n  const refreshSpreadsheetsRequestParams = {\n    formID,\n    spreadsheetId,\n    clientId: sheetConf.clientId,\n    clientSecret: sheetConf.clientSecret,\n    tokenDetails: sheetConf.tokenDetails,\n  }\n  bitsFetch(refreshSpreadsheetsRequestParams, 'gsheet_refresh_worksheets')\n    .then(result => {\n      if (result && result.success) {\n        const newConf = { ...sheetConf }\n        if (result.data.worksheets) {\n          if (!newConf.default.worksheets) {\n            newConf.default.worksheets = {}\n          }\n          newConf.default.worksheets[spreadsheetId] = result.data.worksheets\n        }\n\n        if (result.data.tokenDetails) {\n          newConf.tokenDetails = result.data.tokenDetails\n        }\n        setSnackbar({ show: true, msg: __('Worksheets refreshed', 'bit-integrations') })\n        setSheetConf({ ...newConf })\n      } else {\n        setSnackbar({ show: true, msg: __('Worksheets refresh failed. please try again', 'bit-integrations') })\n      }\n      setIsLoading(false)\n    })\n    .catch(() => setIsLoading(false))\n}\n\nexport const refreshWorksheetHeaders = (formID, sheetConf, setSheetConf, setIsLoading, setSnackbar) => {\n  const { spreadsheetId, worksheetName, header, headerRow } = sheetConf\n  if (!spreadsheetId && !worksheetName && !header && !headerRow) {\n    return\n  }\n\n  setIsLoading(true)\n  const refreshWorksheetHeadersRequestParams = {\n    formID,\n    spreadsheetId,\n    worksheetName,\n    header,\n    headerRow,\n    clientId: sheetConf.clientId,\n    clientSecret: sheetConf.clientSecret,\n    tokenDetails: sheetConf.tokenDetails,\n  }\n  bitsFetch(refreshWorksheetHeadersRequestParams, 'gsheet_refresh_worksheet_headers')\n    .then(result => {\n      if (result && result.success) {\n        const newConf = { ...sheetConf }\n        if (result.data.worksheet_headers?.length > 0) {\n          if (!newConf.default.headers) {\n            newConf.default.headers = {}\n          }\n          if (!newConf.default.headers[spreadsheetId]) {\n            newConf.default.headers[spreadsheetId] = {}\n          }\n          if (!newConf.default.headers[spreadsheetId][worksheetName]) {\n            newConf.default.headers[spreadsheetId][worksheetName] = {}\n          }\n          newConf.default.headers[spreadsheetId][worksheetName][headerRow] = result.data.worksheet_headers\n          if (result.data.tokenDetails) {\n            newConf.tokenDetails = result.data.tokenDetails\n          }\n          setSnackbar({ show: true, msg: __('Worksheet Headers refreshed', 'bit-integrations') })\n        } else {\n          setSnackbar({ show: true, msg: __('No Worksheet headers found. Try changing the header row number or try again', 'bit-integrations') })\n        }\n\n        if (result.data.tokenDetails) {\n          newConf.tokenDetails = result.data.tokenDetails\n        }\n        setSheetConf({ ...newConf })\n      } else {\n        setSnackbar({ show: true, msg: __('Worksheet Headers refresh failed. please try again', 'bit-integrations') })\n      }\n      setIsLoading(false)\n    })\n    .catch(() => setIsLoading(false))\n}\n\nexport const handleAuthorize = (confTmp, setConf, setError, setisAuthorized, setIsLoading, setSnackbar) => {\n  if (!confTmp.clientId || !confTmp.clientSecret) {\n    setError({\n      clientId: !confTmp.clientId ? __('Client ID cann\\'t be empty', 'bit-integrations') : '',\n      clientSecret: !confTmp.clientSecret ? __('Secret key cann\\'t be empty', 'bit-integrations') : '',\n    })\n    return\n  }\n  setIsLoading(true)\n  const scopes = 'https://www.googleapis.com/auth/drive'\n  // eslint-disable-next-line no-undef\n  const apiEndpoint = `https://accounts.google.com/o/oauth2/v2/auth?scope=${scopes}&access_type=offline&prompt=consent&response_type=code&state=${encodeURIComponent(window.location.href)}/redirect&redirect_uri=${encodeURIComponent(`${btcbi.api.base}/redirect`)}&client_id=${confTmp.clientId}`\n  const authWindow = window.open(apiEndpoint, 'googleSheet', 'width=400,height=609,toolbar=off')\n  const popupURLCheckTimer = setInterval(() => {\n    if (authWindow.closed) {\n      clearInterval(popupURLCheckTimer)\n      let grantTokenResponse = {}\n      let isauthRedirectLocation = false\n      const bitsGoogleSheet = localStorage.getItem('__googleSheet')\n      if (bitsGoogleSheet) {\n        isauthRedirectLocation = true\n        grantTokenResponse = JSON.parse(bitsGoogleSheet)\n        localStorage.removeItem('__googleSheet')\n      }\n      if (!grantTokenResponse.code || grantTokenResponse.error || !grantTokenResponse || !isauthRedirectLocation) {\n        const errorCause = grantTokenResponse.error ? `Cause: ${grantTokenResponse.error}` : ''\n        setSnackbar({ show: true, msg: `${__('Authorization failed', 'bit-integrations')} ${errorCause}. ${__('please try again', 'bit-integrations')}` })\n        setIsLoading(false)\n      } else {\n        const newConf = { ...confTmp }\n        newConf.accountServer = grantTokenResponse['accounts-server']\n        tokenHelper(grantTokenResponse, newConf, setConf, setisAuthorized, setIsLoading, setSnackbar)\n      }\n    }\n  }, 500)\n}\n\nconst tokenHelper = (grantToken, confTmp, setConf, setisAuthorized, setIsLoading, setSnackbar) => {\n  const tokenRequestParams = { ...grantToken }\n  tokenRequestParams.clientId = confTmp.clientId\n  tokenRequestParams.clientSecret = confTmp.clientSecret\n  // eslint-disable-next-line no-undef\n  tokenRequestParams.redirectURI = `${btcbi.api.base}/redirect`\n\n  bitsFetch(tokenRequestParams, 'gsheet_generate_token')\n    .then(result => result)\n    .then(result => {\n      if (result && result.success) {\n        const newConf = { ...confTmp }\n        newConf.tokenDetails = result.data\n        setConf(newConf)\n        setisAuthorized(true)\n        setSnackbar({ show: true, msg: __('Authorized Successfully', 'bit-integrations') })\n      } else if ((result && result.data && result.data.data) || (!result.success && typeof result.data === 'string')) {\n        setSnackbar({ show: true, msg: `${__('Authorization failed Cause:', 'bit-integrations')}${result.data.data || result.data}. ${__('please try again', 'bit-integrations')}` })\n      } else {\n        setSnackbar({ show: true, msg: __('Authorization failed. please try again', 'bit-integrations') })\n      }\n      setIsLoading(false)\n    })\n}\n\nexport const checkMappedFields = (sheetconf) => {\n  const mappedFleld = sheetconf.field_map ? sheetconf.field_map.filter(mapped => (!mapped.formField && !mapped.googleSheetField)) : []\n  if (mappedFleld.length > 0) {\n    return false\n  }\n  return true\n}\n"],"names":["handleInput","e","sheetConf","setSheetConf","formID","setIsLoading","setSnackbar","isNew","error","setError","newConf","__spreadValues","rmError","spreadSheetChange","worksheetChange","deepCopy","_b","_a","_d","_c","_f","_e","_i","_h","_g","refreshWorksheetHeaders","refreshWorksheets","refreshSpreadsheets","refreshModulesRequestParams","bitsFetch","result","__","sprintf","spreadsheetId","refreshSpreadsheetsRequestParams","worksheetName","header","headerRow","refreshWorksheetHeadersRequestParams","handleAuthorize","confTmp","setConf","setisAuthorized","apiEndpoint","authWindow","popupURLCheckTimer","grantTokenResponse","isauthRedirectLocation","bitsGoogleSheet","errorCause","tokenHelper","grantToken","tokenRequestParams","checkMappedFields","sheetconf","mapped"],"mappings":"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"}