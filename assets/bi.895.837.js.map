{"version":3,"file":"bi.895.837.js","sources":["../frontend-dev/src/components/AllIntegrations/Smaily/SmailyCommonFunc.js"],"sourcesContent":["/* eslint-disable no-console */\n/* eslint-disable no-else-return */\nimport toast from 'react-hot-toast'\nimport bitsFetch from '../../../Utils/bitsFetch'\nimport { __ } from '../../../Utils/i18nwrap'\n\nexport const handleInput = (e, smailyConf, setSmailyConf) => {\n  const newConf = { ...smailyConf }\n  const { name } = e.target\n  if (e.target.value !== '') {\n    newConf[name] = e.target.value\n  } else {\n    delete newConf[name]\n  }\n  setSmailyConf({ ...newConf })\n}\n\nexport const generateMappedField = (smailyConf) => {\n  const requiredFlds = smailyConf?.staticFields.filter(fld => fld.required === true)\n  return requiredFlds.length > 0 ? requiredFlds.map(field => ({ formField: '', smailyFormField: field.key })) : [{ formField: '', smailyFormField: '' }]\n}\n\nexport const checkMappedFields = (smailyConf) => {\n  const mappedFields = smailyConf?.field_map ? smailyConf.field_map.filter(mappedField => (!mappedField.formField || !mappedField.smailyFormField || (mappedField.formField === 'custom' && !mappedField.customValue) || (mappedField.smailyFormField === 'customFieldKey' && !mappedField.customFieldKey))) : []\n  if (mappedFields.length > 0) {\n    return false\n  }\n  return true\n}\n\nexport const smailyAuthentication = (confTmp, setConf, setError, setIsAuthorized, loading, setLoading) => {\n  if (!confTmp.name || !confTmp.subdomain || !confTmp.api_user_name || !confTmp.api_user_password) {\n    setError({\n      name: !confTmp.name ? __('Integration Name can\\'t be empty', 'bit-integrations') : '',\n      subdomain: !confTmp.subdomain ? __('Subdomain can\\'t be empty', 'bit-integrations') : '',\n      api_user_name: !confTmp.api_user_name ? __('Api user name can\\'t be empty', 'bit-integrations') : '',\n      api_user_password: !confTmp.api_user_password ? __('Api user password can\\'t be empty', 'bit-integrations') : '',\n    })\n    return\n  }\n\n  setError({})\n  setLoading({ ...loading, auth: true })\n\n  const requestParams = { subdomain: confTmp.subdomain, api_user_name: confTmp.api_user_name, api_user_password: confTmp.api_user_password }\n\n  bitsFetch(requestParams, 'smaily_authentication')\n    .then(result => {\n      if (result && result.success) {\n        setIsAuthorized(true)\n        setLoading({ ...loading, auth: false })\n        toast.success(__('Authorized successfully', 'bit-integrations'))\n        return\n      }\n      setLoading({ ...loading, auth: false })\n      toast.error(__('Authorized failed, Please enter valid subdomain name & API credentials', 'bit-integrations'))\n    })\n}\n"],"names":["__","bitsFetch","_t","handleInput","smailyConf","setSmailyConf","newConf","__spreadValues","name","generateMappedField","requiredFlds","fld","field","checkMappedFields","mappedField","smailyAuthentication","confTmp","setConf","setError","setIsAuthorized","loading","setLoading","__spreadProps","requestParams","result","toast"],"mappings":"6aAAA,OAAA,KAAAA,EAAA,KAAAC,EAAA,KAAAC,MAAA,iBAMY,MAACC,EAAc,CAAC,EAAGC,EAAYC,IAAkB,CAC3D,MAAMC,EAAUC,EAAA,GAAKH,GACf,CAAE,KAAAI,GAAS,EAAE,OACf,EAAE,OAAO,QAAU,GACrBF,EAAQE,CAAI,EAAI,EAAE,OAAO,MAEzB,OAAOF,EAAQE,CAAI,EAErBH,EAAcE,EAAA,GAAKD,EAAS,CAC9B,EAEaG,EAAuBL,GAAe,CACjD,MAAMM,EAAeN,GAAA,YAAAA,EAAY,aAAa,OAAOO,GAAOA,EAAI,WAAa,IAC7E,OAAOD,EAAa,OAAS,EAAIA,EAAa,IAAIE,IAAU,CAAE,UAAW,GAAI,gBAAiBA,EAAM,GAAK,EAAC,EAAI,CAAC,CAAE,UAAW,GAAI,gBAAiB,GAAI,CACvJ,EAEaC,EAAqBT,GAE5B,GADiBA,GAAA,MAAAA,EAAY,UAAYA,EAAW,UAAU,OAAOU,GAAgB,CAACA,EAAY,WAAa,CAACA,EAAY,iBAAoBA,EAAY,YAAc,UAAY,CAACA,EAAY,aAAiBA,EAAY,kBAAoB,kBAAoB,CAACA,EAAY,cAAgB,EAAI,CAAE,GAC9R,OAAS,GAMfC,EAAuB,CAACC,EAASC,EAASC,EAAUC,EAAiBC,EAASC,IAAe,CACxG,GAAI,CAACL,EAAQ,MAAQ,CAACA,EAAQ,WAAa,CAACA,EAAQ,eAAiB,CAACA,EAAQ,kBAAmB,CAC/FE,EAAS,CACP,KAAOF,EAAQ,KAAoE,GAA7DhB,EAAG,kCAAoC,kBAAkB,EAC/E,UAAYgB,EAAQ,UAAkE,GAAtDhB,EAAG,2BAA6B,kBAAkB,EAClF,cAAgBgB,EAAQ,cAA0E,GAA1DhB,EAAG,+BAAiC,kBAAkB,EAC9F,kBAAoBgB,EAAQ,kBAAkF,GAA9DhB,EAAG,mCAAqC,kBAAkB,CAChH,CAAK,EACD,MACD,CAEDkB,EAAS,CAAA,CAAE,EACXG,EAAWC,EAAAf,EAAA,GAAKa,GAAL,CAAc,KAAM,EAAI,EAAE,EAErC,MAAMG,EAAgB,CAAE,UAAWP,EAAQ,UAAW,cAAeA,EAAQ,cAAe,kBAAmBA,EAAQ,iBAAmB,EAE1If,EAAUsB,EAAe,uBAAuB,EAC7C,KAAKC,GAAU,CACd,GAAIA,GAAUA,EAAO,QAAS,CAC5BL,EAAgB,EAAI,EACpBE,EAAWC,EAAAf,EAAA,GAAKa,GAAL,CAAc,KAAM,EAAK,EAAE,EACtCK,EAAM,QAAQzB,EAAG,0BAA2B,kBAAkB,CAAC,EAC/D,MACD,CACDqB,EAAWC,EAAAf,EAAA,GAAKa,GAAL,CAAc,KAAM,EAAK,EAAE,EACtCK,EAAM,MAAMzB,EAAG,yEAA0E,kBAAkB,CAAC,CAClH,CAAK,CACL"}