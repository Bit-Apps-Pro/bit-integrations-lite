{"version":3,"file":"bi.290.243.js","sources":["../frontend-dev/src/components/AllIntegrations/IntegrationHelpers/WebHook/WebHooksIntegration.jsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { Panel, Tab, Tabs } from '@bumaga/tabs'\nimport BackIcn from '../../../../Icons/BackIcn'\nimport bitsFetch from '../../../../Utils/bitsFetch'\nimport { __ } from '../../../../Utils/i18nwrap'\nimport Button from '../../../Utilities/Button'\nimport LoaderSm from '../../../Loaders/LoaderSm'\nimport Params from './Params'\nimport RequestHeaders from './RequestHeaders'\nimport Body from './Body'\nimport TableCheckBox from '../../../Utilities/TableCheckBox'\nimport ConditionalLogic from '../../../ConditionalLogic'\nimport Note from '../../../Utilities/Note'\n\nexport default function WebHooksIntegration({ formFields, webHooks, setWebHooks, setStep, setSnackbar, create, isInfo }) {\n  const [isLoading, setIsLoading] = useState(false)\n  const [tab, setTab] = useState(1)\n  const method = ['GET', 'POST', 'PUT', 'PATCH', 'OPTION', 'DELETE', 'TRACE', 'CONNECT']\n  const handleInput = (e) => {\n    const tmpConfConf = { ...webHooks }\n    tmpConfConf[e.target.name] = e.target.value\n    setWebHooks({ ...tmpConfConf })\n  }\n  const testWebHook = (webHooksDetails) => {\n    setIsLoading(true)\n    bitsFetch({ hookDetails: webHooksDetails }, 'test_webhook').then(response => {\n      if (response && response.success) {\n        setSnackbar({ show: true, msg: `${response.data}` })\n        setIsLoading(false)\n      } else if (response && response.data) {\n        const msg = typeof response.data === 'string' ? response.data : 'Unknown error'\n        setSnackbar({ show: true, msg: `${msg}. ${__('please try again', 'bit-integrations')}` })\n        setIsLoading(false)\n      } else {\n        setSnackbar({ show: true, msg: __('Webhook tests failed. please try again', 'bit-integrations') })\n        setIsLoading(false)\n      }\n    })\n  }\n\n  useEffect(() => {\n    if (webHooks && !webHooks?.condition) {\n      const tmpConf = { ...webHooks }\n      tmpConf.condition = {\n        action_behavior: '',\n        actions: [{ field: '', action: 'value' }],\n        logics: [\n          { field: '', logic: '', val: '' },\n          'or',\n          { field: '', logic: '', val: '' },\n        ],\n      }\n      setWebHooks(tmpConf)\n    }\n  }, [])\n\n  const checkedCondition = (val, checked) => {\n    const tmpConf = { ...webHooks }\n    if (checked) {\n      tmpConf.condition.action_behavior = val\n    } else {\n      tmpConf.condition.action_behavior = ''\n    }\n    setWebHooks(tmpConf)\n  }\n\n  const nextPage = () => {\n    setTimeout(() => {\n      document.getElementById('btcd-settings-wrp').scrollTop = 0\n    }, 300)\n\n    setStep(2)\n  }\n\n  const info = `You can test any kind of webhook using <a href=\"https://app.webhook.is/test\" target=\"_blank\" rel=\"noreferrer\">app.webhook.is</a>`\n\n  return (\n    <div style={{ ...{ width: isInfo && 900 } }}>\n      <div className=\"flx \">\n        <div className=\"w-8 mr-2 mt-2 mb-4\">\n          <div className=\"f-m\">{__('Integration name', 'bit-integrations')}</div>\n          <input name=\"name\" onChange={e => handleInput(e, webHooks, setWebHooks)} className=\"btcd-paper-inp mt-1\" type=\"text\" value={webHooks.name} disabled={isInfo} />\n        </div>\n      </div>\n\n      <div className=\"flx\">\n        <div className=\"w-5 mr-2 \">\n          <div className=\"f-m\">{__('Link:', 'bit-integrations')}</div>\n          <input name=\"url\" onChange={e => handleInput(e, webHooks, setWebHooks)} className=\"btcd-paper-inp mt-1\" type=\"text\" value={webHooks.url} disabled={isInfo} />\n        </div>\n        <div className=\"w-3\">\n          <div className=\"f-m\">{__('Method:', 'bit-integrations')}</div>\n          <select name=\"method\" onChange={e => handleInput(e, webHooks, setWebHooks)} defaultValue={webHooks.method} className=\"btcd-paper-inp mt-1\" disabled={isInfo}>\n            {method.map((itm, indx) => (<option key={`method-${indx * 2}`} value={itm}>{itm}</option>))}\n          </select>\n        </div>\n      </div>\n      {webHooks?.apiConsole && (\n        <small className=\"d-blk mt-2\">\n          {__('To got Webhook , Please Visit', 'bit-integrations')}\n          {' '}\n          <a className=\"btcd-link\" href={webHooks.apiConsole} target=\"_blank\" rel=\"noreferrer\">{__(`${webHooks.type} Dashboard`, 'bit-integrations')}</a>\n        </small>\n      )}\n      {!isInfo && (\n        <Button onClick={() => testWebHook(webHooks, setIsLoading, setSnackbar)} className=\"btn btcd-btn-o-blue\">\n          {__('Test Webhook', 'bit-integrations')}\n          {isLoading && <LoaderSm size={14} clr=\"#022217\" className=\"ml-2\" />}\n        </Button>\n      )}\n      <br />\n      <br />\n      <Tabs>\n        <div className=\"flx mt-2\">\n          <Tab>\n            <button className={`btcd-s-tab-link ${tab === 1 && 's-t-l-active'}`} type=\"button\">\n              {__('Params', 'bit-integrations')}\n            </button>\n          </Tab>\n          <Tab>\n            <button className={`btcd-s-tab-link ${tab === 2 && 's-t-l-active'}`} type=\"button\">\n              {__('Headers', 'bit-integrations')}\n            </button>\n          </Tab>\n          <Tab>\n            <button className={`btcd-s-tab-link ${tab === 3 && 's-t-l-active'}`} type=\"button\">\n              {__('Body', 'bit-integrations')}\n            </button>\n          </Tab>\n        </div>\n        <div className=\"btcd-hr\" />\n        <Panel>\n          <Params webHooks={webHooks} setWebHooks={setWebHooks} formFields={formFields} isInfo={isInfo} setTab={setTab} />\n        </Panel>\n        <Panel>\n          <RequestHeaders webHooks={webHooks} setWebHooks={setWebHooks} formFields={formFields} isInfo={isInfo} setTab={setTab} />\n        </Panel>\n        <Panel>\n          <Body webHooks={webHooks} setWebHooks={setWebHooks} formFields={formFields} isInfo={isInfo} setTab={setTab} />\n        </Panel>\n      </Tabs>\n\n      {webHooks?.condition && (\n        <>\n          <div className=\"flx\">\n            <TableCheckBox onChange={e => checkedCondition(e.target.value, e.target.checked)} checked={webHooks?.condition?.action_behavior === 'cond'} className=\"wdt-200 mt-4 mr-2\" value=\"cond\" title={__('Conditional Logics', 'bit_integration')} isInfo={isInfo} />\n          </div>\n          <br />\n          {webHooks?.condition?.action_behavior === 'cond' && (\n            <ConditionalLogic formFields={formFields} dataConf={webHooks} setDataConf={setWebHooks} />\n          )}\n        </>\n      )}\n      {create && (\n        <button onClick={() => nextPage()} className=\"btn btcd-btn-lg green sh-sm flx\" type=\"button\">\n          {__('Next', 'bit-integrations')}\n          <BackIcn className=\"ml-1 rev-icn\" />\n        </button>\n      )}\n\n      <Note note={info} />\n    </div>\n  )\n}\n"],"names":["reactExports","jsxRuntimeExports","Tabs","Tab","Panel","BackIcn","__","LoaderSm","TableCheckBox","Note","bitsFetch","Button","ConditionalLogic","Params","RequestHeaders","Body","WebHooksIntegration","formFields","webHooks","setWebHooks","setStep","setSnackbar","create","isInfo","_a","_b","isLoading","setIsLoading","useState","tab","setTab","method","handleInput","e","tmpConfConf","__spreadValues","testWebHook","webHooksDetails","response","msg","useEffect","tmpConf","checkedCondition","val","checked","nextPage","info","jsxs","jsx","itm","indx","Fragment"],"mappings":"yVAcwB,OAAA,KAAAA,EAAA,KAAAC,MAAA,gBAAA,OAAA,KAAAC,EAAA,KAAAC,EAAA,KAAAC,MAAA,kBAAA,OAAA,KAAAC,MAAA,kBAAA,OAAA,KAAAC,EAAA,KAAAC,EAAA,MAAAC,EAAA,MAAAC,EAAA,KAAAC,MAAA,iBAAA,OAAA,KAAAC,EAAA,KAAAC,MAAA,kBAAA,OAAA,KAAAC,EAAA,KAAAC,EAAA,KAAAC,MAAA,kBAAA,MAAA,kBAAA,SAAAC,EAAoB,CAAE,WAAAC,EAAY,SAAAC,EAAU,YAAAC,EAAa,QAAAC,EAAS,YAAAC,EAAa,OAAAC,EAAQ,OAAAC,GAAU,CAAjG,IAAAC,EAAAC,EACtB,KAAM,CAACC,EAAWC,CAAY,EAAIC,WAAS,EAAK,EAC1C,CAACC,EAAKC,CAAM,EAAIF,WAAS,CAAC,EAC1BG,EAAS,CAAC,MAAO,OAAQ,MAAO,QAAS,SAAU,SAAU,QAAS,SAAS,EAC/EC,EAAeC,GAAM,CACnB,MAAAC,EAAcC,EAAA,GAAKjB,GACzBgB,EAAYD,EAAE,OAAO,IAAI,EAAIA,EAAE,OAAO,MAC1Bd,EAAAgB,EAAA,GAAKD,EAAa,CAAA,EAE1BE,EAAeC,GAAoB,CACvCV,EAAa,EAAI,EACjBjB,EAAU,CAAE,YAAa2B,CAAA,EAAmB,cAAc,EAAE,KAAiBC,GAAA,CACvE,GAAAA,GAAYA,EAAS,QACXjB,EAAA,CAAE,KAAM,GAAM,IAAK,GAAGiB,EAAS,IAAI,GAAI,EACnDX,EAAa,EAAK,UACTW,GAAYA,EAAS,KAAM,CACpC,MAAMC,EAAM,OAAOD,EAAS,MAAS,SAAWA,EAAS,KAAO,gBAChEjB,EAAY,CAAE,KAAM,GAAM,IAAK,GAAGkB,CAAG,KAAKjC,EAAG,mBAAoB,kBAAkB,CAAC,EAAI,CAAA,EACxFqB,EAAa,EAAK,CAAA,MAENN,EAAA,CAAE,KAAM,GAAM,IAAKf,EAAG,yCAA0C,kBAAkB,EAAG,EACjGqB,EAAa,EAAK,CACpB,CACD,CAAA,EAGHa,EAAAA,UAAU,IAAM,CACV,GAAAtB,GAAY,EAACA,GAAA,MAAAA,EAAU,WAAW,CAC9B,MAAAuB,EAAUN,EAAA,GAAKjB,GACrBuB,EAAQ,UAAY,CAClB,gBAAiB,GACjB,QAAS,CAAC,CAAE,MAAO,GAAI,OAAQ,QAAS,EACxC,OAAQ,CACN,CAAE,MAAO,GAAI,MAAO,GAAI,IAAK,EAAG,EAChC,KACA,CAAE,MAAO,GAAI,MAAO,GAAI,IAAK,EAAG,CAClC,CAAA,EAEFtB,EAAYsB,CAAO,CACrB,CACF,EAAG,CAAE,CAAA,EAEC,MAAAC,EAAmB,CAACC,EAAKC,IAAY,CACnC,MAAAH,EAAUN,EAAA,GAAKjB,GACjB0B,EACFH,EAAQ,UAAU,gBAAkBE,EAEpCF,EAAQ,UAAU,gBAAkB,GAEtCtB,EAAYsB,CAAO,CAAA,EAGfI,EAAW,IAAM,CACrB,WAAW,IAAM,CACN,SAAA,eAAe,mBAAmB,EAAE,UAAY,GACxD,GAAG,EAENzB,EAAQ,CAAC,CAAA,EAGL0B,EAAO,mIAGX,OAAAC,OAAC,MAAI,CAAA,MAAO,CAAO,MAAOxB,GAAU,GAClC,EAAA,SAAA,CAAAyB,EAAAA,IAAC,OAAI,UAAU,OACb,SAACD,EAAA,KAAA,MAAA,CAAI,UAAU,qBACb,SAAA,CAAAC,MAAC,OAAI,UAAU,MAAO,SAAG1C,EAAA,mBAAoB,kBAAkB,EAAE,QAChE,QAAM,CAAA,KAAK,OAAO,SAAU2B,GAAKD,EAAYC,CAAwB,EAAG,UAAU,sBAAsB,KAAK,OAAO,MAAOf,EAAS,KAAM,SAAUK,EAAQ,CAAA,CAAA,CAC/J,CACF,CAAA,EAEAwB,EAAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,MAAC,OAAI,UAAU,MAAO,SAAG1C,EAAA,QAAS,kBAAkB,EAAE,QACrD,QAAM,CAAA,KAAK,MAAM,SAAU2B,GAAKD,EAAYC,CAAwB,EAAG,UAAU,sBAAsB,KAAK,OAAO,MAAOf,EAAS,IAAK,SAAUK,EAAQ,CAAA,EAC7J,EACAwB,EAAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAAAC,MAAC,OAAI,UAAU,MAAO,SAAG1C,EAAA,UAAW,kBAAkB,EAAE,EACvD0C,EAAA,IAAA,SAAA,CAAO,KAAK,SAAS,SAAef,GAAAD,EAAYC,CAAwB,EAAG,aAAcf,EAAS,OAAQ,UAAU,sBAAsB,SAAUK,EAClJ,SAAOQ,EAAA,IAAI,CAACkB,EAAKC,IAAWF,EAAAA,IAAA,SAAA,CAAkC,MAAOC,EAAM,YAAnC,UAAUC,EAAO,CAAC,EAAqB,CAAU,EAC5F,CAAA,EACF,CAAA,EACF,GACChC,GAAA,YAAAA,EAAU,aACR6B,OAAA,QAAA,CAAM,UAAU,aACd,SAAA,CAAAzC,EAAG,gCAAiC,kBAAkB,EACtD,UACA,IAAE,CAAA,UAAU,YAAY,KAAMY,EAAS,WAAY,OAAO,SAAS,IAAI,aAAc,SAAGZ,EAAA,GAAGY,EAAS,IAAI,aAAc,kBAAkB,EAAE,CAAA,EAC7I,EAED,CAACK,GACCwB,EAAAA,KAAApC,EAAA,CAAO,QAAS,IAAMyB,EAAYlB,CAAmC,EAAG,UAAU,sBAChF,SAAA,CAAAZ,EAAG,eAAgB,kBAAkB,EACrCoB,SAAcnB,EAAS,CAAA,KAAM,GAAI,IAAI,UAAU,UAAU,OAAO,CAAA,EACnE,QAED,KAAG,EAAA,QACH,KAAG,EAAA,SACHL,EACC,CAAA,SAAA,CAAC6C,EAAAA,KAAA,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,MAAC7C,EACC,CAAA,SAAA6C,EAAA,IAAC,SAAO,CAAA,UAAW,mBAAmBnB,IAAQ,GAAK,cAAc,GAAI,KAAK,SACvE,SAAAvB,EAAG,SAAU,kBAAkB,CAClC,CAAA,EACF,QACCH,EACC,CAAA,SAAA6C,EAAA,IAAC,SAAO,CAAA,UAAW,mBAAmBnB,IAAQ,GAAK,cAAc,GAAI,KAAK,SACvE,SAAAvB,EAAG,UAAW,kBAAkB,CACnC,CAAA,EACF,QACCH,EACC,CAAA,SAAA6C,EAAA,IAAC,SAAO,CAAA,UAAW,mBAAmBnB,IAAQ,GAAK,cAAc,GAAI,KAAK,SACvE,SAAAvB,EAAG,OAAQ,kBAAkB,CAChC,CAAA,EACF,CAAA,EACF,EACA0C,EAAAA,IAAC,MAAI,CAAA,UAAU,SAAU,CAAA,EACzBA,EAAAA,IAAC5C,GACC,SAAC4C,EAAAA,IAAAnC,EAAA,CAAO,SAAAK,EAAoB,YAAAC,EAA0B,WAAAF,EAAwB,OAAAM,EAAgB,OAAAO,CAAA,CAAgB,CAChH,CAAA,EACAkB,EAAAA,IAAC5C,GACC,SAAC4C,EAAAA,IAAAlC,EAAA,CAAe,SAAAI,EAAoB,YAAAC,EAA0B,WAAAF,EAAwB,OAAAM,EAAgB,OAAAO,CAAA,CAAgB,CACxH,CAAA,EACAkB,EAAAA,IAAC5C,GACC,SAAC4C,EAAAA,IAAAjC,EAAA,CAAK,SAAAG,EAAoB,YAAAC,EAA0B,WAAAF,EAAwB,OAAAM,EAAgB,OAAAO,CAAA,CAAgB,CAC9G,CAAA,CAAA,EACF,GAECZ,GAAA,YAAAA,EAAU,YAEP6B,EAAAA,KAAAI,EAAA,SAAA,CAAA,SAAA,CAAAH,EAAA,IAAC,MAAI,CAAA,UAAU,MACb,SAAAA,EAAAA,IAACxC,EAAc,CAAA,SAAeyB,GAAAS,EAAiBT,EAAE,OAAO,MAAOA,EAAE,OAAO,OAAO,EAAG,UAAST,EAAAN,GAAA,YAAAA,EAAU,YAAV,YAAAM,EAAqB,mBAAoB,OAAQ,UAAU,oBAAoB,MAAM,OAAO,MAAOlB,EAAG,qBAAsB,iBAAiB,EAAG,OAAAiB,CAAgB,CAAA,EAC7P,QACC,KAAG,EAAA,IACHE,EAAAP,GAAA,YAAAA,EAAU,YAAV,YAAAO,EAAqB,mBAAoB,QACxCuB,EAAAA,IAACpC,GAAiB,WAAAK,EAAwB,SAAUC,EAAU,YAAaC,CAAa,CAAA,CAAA,EAE5F,EAEDG,GACEyB,EAAA,KAAA,SAAA,CAAO,QAAS,IAAMF,IAAY,UAAU,kCAAkC,KAAK,SACjF,SAAA,CAAAvC,EAAG,OAAQ,kBAAkB,EAC9B0C,EAAAA,IAAC3C,EAAQ,CAAA,UAAU,cAAe,CAAA,CAAA,EACpC,EAGF2C,EAAAA,IAACvC,EAAK,CAAA,KAAMqC,CAAM,CAAA,CACpB,CAAA,CAAA,CAEJ"}